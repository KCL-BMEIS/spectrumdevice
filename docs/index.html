<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 8.0.1" />
    <title>spectrumdevice API documentation</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2264%22%20height%3D%2264%22%20viewBox%3D%2244.5%202.5%2015%2015%22%3E%3Cpath%20d%3D%22M49.351%2021.041c-.233-.721-.546-2.408-.772-4.076-.042-.09-.067-.187-.046-.288-.166-1.347-.277-2.625-.241-3.351-1.378-1.008-2.271-2.586-2.271-4.362%200-.976.272-1.935.788-2.774.057-.094.122-.18.184-.268-.033-.167-.052-.339-.052-.516%200-1.477%201.202-2.679%202.679-2.679.791%200%201.496.352%201.987.9a6.3%206.3%200%200%201%201.001.029c.492-.564%201.207-.929%202.012-.929%201.477%200%202.679%201.202%202.679%202.679a2.65%202.65%200%200%201-.269%201.148c.383.747.595%201.572.595%202.41%200%202.311-1.507%204.29-3.635%205.107.037.699.147%202.27.423%203.294l.137.461c.156%202.136-4.612%205.166-5.199%203.215zm.127-4.919a4.78%204.78%200%200%200%20.775-.584c-.172-.115-.505-.254-.88-.378zm.331%202.302l.828-.502c-.202-.143-.576-.328-.984-.49zm.45%202.157l.701-.403c-.214-.115-.536-.249-.891-.376l.19.779zM49.13%204.141c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm.735-.389a1.15%201.15%200%200%201%20.314.783%201.16%201.16%200%200%201-1.162%201.162c-.457%200-.842-.27-1.032-.653-.026.117-.042.238-.042.362a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.843-.626-1.535-1.436-1.654zm3.076%201.654a1.68%201.68%200%200%200%201.679%201.679%201.68%201.68%200%200%200%201.679-1.679c0-.037-.009-.072-.011-.109-.21.3-.541.508-.935.508a1.16%201.16%200%200%201-1.162-1.162%201.14%201.14%200%200%201%20.474-.912c-.015%200-.03-.005-.045-.005-.926.001-1.679.754-1.679%201.68zm1.861-1.265c0%20.152.123.276.276.276s.275-.124.275-.276-.123-.276-.276-.276-.275.124-.275.276zm1.823%204.823c0-.52-.103-1.035-.288-1.52-.466.394-1.06.64-1.717.64-1.144%200-2.116-.725-2.499-1.738-.383%201.012-1.355%201.738-2.499%201.738-.867%200-1.631-.421-2.121-1.062-.307.605-.478%201.267-.478%201.942%200%202.486%202.153%204.51%204.801%204.51s4.801-2.023%204.801-4.51zm-3.032%209.156l-.146-.492c-.276-1.02-.395-2.457-.444-3.268a6.11%206.11%200%200%201-1.18.115%206.01%206.01%200%200%201-2.536-.562l.006.175c.802.215%201.848.612%202.021%201.25.079.295-.021.601-.274.837l-.598.501c.667.304%201.243.698%201.311%201.179.02.144.022.507-.393.787l-.564.365c1.285.521%201.361.96%201.381%201.126.018.142.011.496-.427.746l-.854.489c.064-1.19%201.985-2.585%202.697-3.248zM49.34%209.925c0-.667%201-.667%201%200%200%20.653.818%201.205%201.787%201.205s1.787-.552%201.787-1.205c0-.667%201-.667%201%200%200%201.216-1.25%202.205-2.787%202.205s-2.787-.989-2.787-2.205zm-.887-7.633c-.093.077-.205.114-.317.114a.5.5%200%200%201-.318-.886L49.183.397a.5.5%200%200%201%20.703.068.5.5%200%200%201-.069.703zm7.661-.065c-.086%200-.173-.022-.253-.068l-1.523-.893c-.575-.337-.069-1.2.506-.863l1.523.892a.5.5%200%200%201%20.179.685c-.094.158-.261.247-.432.247z%22%20fill%3D%22%233bb300%22/%3E%3C/svg%3E"/>


<style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
<style>/*! pygments syntax highlighting */pre{line-height:125%;}td.linenos pre{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}span.linenos{color:#000000; background-color:#f0f0f0; padding-left:5px; padding-right:5px;}td.linenos pre.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}.pdoc .hll{background-color:#ffffcc}.pdoc{background:#f8f8f8;}.pdoc .c{color:#408080; font-style:italic}.pdoc .err{border:1px solid #FF0000}.pdoc .k{color:#008000; font-weight:bold}.pdoc .o{color:#666666}.pdoc .ch{color:#408080; font-style:italic}.pdoc .cm{color:#408080; font-style:italic}.pdoc .cp{color:#BC7A00}.pdoc .cpf{color:#408080; font-style:italic}.pdoc .c1{color:#408080; font-style:italic}.pdoc .cs{color:#408080; font-style:italic}.pdoc .gd{color:#A00000}.pdoc .ge{font-style:italic}.pdoc .gr{color:#FF0000}.pdoc .gh{color:#000080; font-weight:bold}.pdoc .gi{color:#00A000}.pdoc .go{color:#888888}.pdoc .gp{color:#000080; font-weight:bold}.pdoc .gs{font-weight:bold}.pdoc .gu{color:#800080; font-weight:bold}.pdoc .gt{color:#0044DD}.pdoc .kc{color:#008000; font-weight:bold}.pdoc .kd{color:#008000; font-weight:bold}.pdoc .kn{color:#008000; font-weight:bold}.pdoc .kp{color:#008000}.pdoc .kr{color:#008000; font-weight:bold}.pdoc .kt{color:#B00040}.pdoc .m{color:#666666}.pdoc .s{color:#BA2121}.pdoc .na{color:#7D9029}.pdoc .nb{color:#008000}.pdoc .nc{color:#0000FF; font-weight:bold}.pdoc .no{color:#880000}.pdoc .nd{color:#AA22FF}.pdoc .ni{color:#999999; font-weight:bold}.pdoc .ne{color:#D2413A; font-weight:bold}.pdoc .nf{color:#0000FF}.pdoc .nl{color:#A0A000}.pdoc .nn{color:#0000FF; font-weight:bold}.pdoc .nt{color:#008000; font-weight:bold}.pdoc .nv{color:#19177C}.pdoc .ow{color:#AA22FF; font-weight:bold}.pdoc .w{color:#bbbbbb}.pdoc .mb{color:#666666}.pdoc .mf{color:#666666}.pdoc .mh{color:#666666}.pdoc .mi{color:#666666}.pdoc .mo{color:#666666}.pdoc .sa{color:#BA2121}.pdoc .sb{color:#BA2121}.pdoc .sc{color:#BA2121}.pdoc .dl{color:#BA2121}.pdoc .sd{color:#BA2121; font-style:italic}.pdoc .s2{color:#BA2121}.pdoc .se{color:#BB6622; font-weight:bold}.pdoc .sh{color:#BA2121}.pdoc .si{color:#BB6688; font-weight:bold}.pdoc .sx{color:#008000}.pdoc .sr{color:#BB6688}.pdoc .s1{color:#BA2121}.pdoc .ss{color:#19177C}.pdoc .bp{color:#008000}.pdoc .fm{color:#0000FF}.pdoc .vc{color:#19177C}.pdoc .vg{color:#19177C}.pdoc .vi{color:#19177C}.pdoc .vm{color:#19177C}.pdoc .il{color:#666666}</style>
<style>/*! pdoc */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f7f7f7;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}body{background-color:var(--pdoc-background);}html, body{width:100%;height:100%;}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}.git-button{display:none !important;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}#navtoggle{display:none;}}#togglestate{display:none;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}html, main{scroll-behavior:smooth;}.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{background-color:var(--code);border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{--shift:-40px;text-align:right;margin-top:var(--shift);margin-bottom:calc(0px - var(--shift));clear:both;filter:opacity(1);}.pdoc details:not([open]){height:0;overflow:visible;}.pdoc details > summary{font-size:.75rem;cursor:pointer;color:var(--muted);border-width:0;padding:0 .7em;display:inline-block;display:inline list-item;user-select:none;}.pdoc details > summary:focus{outline:0;}.pdoc details > div{margin-top:calc(0px - var(--shift) / 2);text-align:left;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:3rem;}.pdoc .docstring pre{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:1rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}</style>
</head>
<body>        <nav class="pdoc">
            <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
            <input id="togglestate" type="checkbox">
            <div>
                        <a class="pdoc-button module-list-button" href="contents.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                            &nbsp;
                            Module Index
                        </a>

    <h2>spectrumdevice v0.3.0</h2>

                        <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                               pattern=".+" required>


                    <h2>Submodules</h2>
                    <ul>
                            <li><a href="spectrumdevice/settings.html">spectrumdevice.settings</a></li>
                    </ul>

                    <h2>API Documentation</h2>
                        <ul class="memberlist">
            <li>
                    <a class="class" href="#SpectrumDevice">SpectrumDevice</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SpectrumDevice.reset">reset</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.start_acquisition">start_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.stop_acquisition">stop_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.configure_acquisition">configure_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.configure_trigger">configure_trigger</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.execute_standard_single_acquisition">execute_standard_single_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.execute_finite_multi_fifo_acquisition">execute_finite_multi_fifo_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.execute_continuous_multi_fifo_acquisition">execute_continuous_multi_fifo_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.write_to_spectrum_device_register">write_to_spectrum_device_register</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumDevice.read_spectrum_device_register">read_spectrum_device_register</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SpectrumCard">SpectrumCard</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SpectrumCard.__init__">SpectrumCard</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.enable_timestamping">enable_timestamping</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.reconnect">reconnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.status">status</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.wait_for_acquisition_to_complete">wait_for_acquisition_to_complete</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.start_transfer">start_transfer</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.stop_transfer">stop_transfer</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.wait_for_transfer_to_complete">wait_for_transfer_to_complete</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.transfer_buffers">transfer_buffers</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.define_transfer_buffer">define_transfer_buffer</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.get_waveforms">get_waveforms</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.get_timestamp">get_timestamp</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.disconnect">disconnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.connected">connected</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.channels">channels</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.enabled_channels">enabled_channels</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_enabled_channels">set_enabled_channels</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.trigger_sources">trigger_sources</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_trigger_sources">set_trigger_sources</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.external_trigger_mode">external_trigger_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_external_trigger_mode">set_external_trigger_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.external_trigger_level_in_mv">external_trigger_level_in_mv</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_external_trigger_level_in_mv">set_external_trigger_level_in_mv</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.external_trigger_pulse_width_in_samples">external_trigger_pulse_width_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_external_trigger_pulse_width_in_samples">set_external_trigger_pulse_width_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.apply_channel_enabling">apply_channel_enabling</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.acquisition_length_in_samples">acquisition_length_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_acquisition_length_in_samples">set_acquisition_length_in_samples</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.post_trigger_length_in_samples">post_trigger_length_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_post_trigger_length_in_samples">set_post_trigger_length_in_samples</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.acquisition_mode">acquisition_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_acquisition_mode">set_acquisition_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.timeout_in_ms">timeout_in_ms</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_timeout_in_ms">set_timeout_in_ms</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.clock_mode">clock_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_clock_mode">set_clock_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.available_io_modes">available_io_modes</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.feature_list">feature_list</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumCard.sample_rate_in_hz">sample_rate_in_hz</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumCard.set_sample_rate_in_hz">set_sample_rate_in_hz</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SpectrumStarHub">SpectrumStarHub</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SpectrumStarHub.__init__">SpectrumStarHub</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.disconnect">disconnect</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.reconnect">reconnect</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.status">status</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.start_transfer">start_transfer</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.stop_transfer">stop_transfer</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.wait_for_transfer_to_complete">wait_for_transfer_to_complete</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.connected">connected</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_triggering_card">set_triggering_card</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.clock_mode">clock_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_clock_mode">set_clock_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.sample_rate_in_hz">sample_rate_in_hz</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_sample_rate_in_hz">set_sample_rate_in_hz</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.trigger_sources">trigger_sources</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_trigger_sources">set_trigger_sources</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.external_trigger_mode">external_trigger_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_external_trigger_mode">set_external_trigger_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.external_trigger_level_in_mv">external_trigger_level_in_mv</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_external_trigger_level_in_mv">set_external_trigger_level_in_mv</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.external_trigger_pulse_width_in_samples">external_trigger_pulse_width_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_external_trigger_pulse_width_in_samples">set_external_trigger_pulse_width_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.apply_channel_enabling">apply_channel_enabling</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.enabled_channels">enabled_channels</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_enabled_channels">set_enabled_channels</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.transfer_buffers">transfer_buffers</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.define_transfer_buffer">define_transfer_buffer</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.wait_for_acquisition_to_complete">wait_for_acquisition_to_complete</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.get_waveforms">get_waveforms</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.get_timestamp">get_timestamp</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.enable_timestamping">enable_timestamping</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.channels">channels</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.acquisition_length_in_samples">acquisition_length_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_acquisition_length_in_samples">set_acquisition_length_in_samples</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.post_trigger_length_in_samples">post_trigger_length_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_post_trigger_length_in_samples">set_post_trigger_length_in_samples</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.acquisition_mode">acquisition_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_acquisition_mode">set_acquisition_mode</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.timeout_in_ms">timeout_in_ms</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumStarHub.set_timeout_in_ms">set_timeout_in_ms</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.feature_list">feature_list</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumStarHub.available_io_modes">available_io_modes</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SpectrumChannel">SpectrumChannel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SpectrumChannel.__init__">SpectrumChannel</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumChannel.convert_raw_waveform_to_voltage_waveform">convert_raw_waveform_to_voltage_waveform</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumChannel.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumChannel.vertical_range_in_mv">vertical_range_in_mv</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumChannel.set_vertical_range_in_mv">set_vertical_range_in_mv</a>
                        </li>
                        <li>
                                <a class="variable" href="#SpectrumChannel.vertical_offset_in_percent">vertical_offset_in_percent</a>
                        </li>
                        <li>
                                <a class="function" href="#SpectrumChannel.set_vertical_offset_in_percent">set_vertical_offset_in_percent</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MockSpectrumCard">MockSpectrumCard</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MockSpectrumCard.__init__">MockSpectrumCard</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.enable_timestamping">enable_timestamping</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.set_acquisition_mode">set_acquisition_mode</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.set_sample_rate_in_hz">set_sample_rate_in_hz</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.set_acquisition_length_in_samples">set_acquisition_length_in_samples</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.set_enabled_channels">set_enabled_channels</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.define_transfer_buffer">define_transfer_buffer</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.start_transfer">start_transfer</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.stop_transfer">stop_transfer</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.wait_for_transfer_to_complete">wait_for_transfer_to_complete</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumCard.wait_for_acquisition_to_complete">wait_for_acquisition_to_complete</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MockSpectrumStarHub">MockSpectrumStarHub</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MockSpectrumStarHub.__init__">MockSpectrumStarHub</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumStarHub.start_acquisition">start_acquisition</a>
                        </li>
                        <li>
                                <a class="function" href="#MockSpectrumStarHub.stop_acquisition">stop_acquisition</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="module" href="#settings">settings</a>
            </li>
            <li>
                    <a class="class" href="#Measurement">Measurement</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Measurement.__init__">Measurement</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measurement.waveforms">waveforms</a>
                        </li>
                        <li>
                                <a class="variable" href="#Measurement.timestamp">timestamp</a>
                        </li>
                </ul>

            </li>
    </ul>


    <footer>spectrumdevice v0.3.0</footer>

                    <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
                        built with <span class="visually-hidden">pdoc</span><img
                            alt="pdoc logo"
                            src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
                    </a>
            </div>
        </nav>
    <main class="pdoc">
            <section>
                    <h1 class="modulename">
spectrumdevice    </h1>

                        <div class="docstring"><p><code><a href="">spectrumdevice</a></code> is a high-level, object-oriented Python library for controlling Spectrum Instrumentation digitisers.</p>

<p>It can connect to individual digitisers or
<a href="https://spectrum-instrumentation.com/en/m4i-star-hub">StarHubs</a> (e.g. the
<a href="https://spectrum-instrumentation.com/en/digitizernetbox">NetBox</a>).</p>

<p>The main module <code><a href="">spectrumdevice</a></code> provides two classes <code><a href="#SpectrumCard">SpectrumCard</a></code> and <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code> for controlling and receiving
data from individual digitisers and StarHubs respectively. Mock classes are also provided for testing software without
drivers installed or hardware connected.</p>

<p>The submodule <code><a href="spectrumdevice/settings.html">spectrumdevice.settings</a></code> provides Enums and Dataclasses wrapping the register values provided by the
Spectrum API, to be used for configuring hardware and interpreting responses received from hardware.</p>

<ul>
<li><a href="https://github.com/KCL-BMEIS/spectrumdevice">Source on GitHub</a></li>
<li><a href="https://github.com/KCL-BMEIS/spectrumdevice/blob/main/README.md">README including quickstart</a></li>
<li><a href="https://github.com/KCL-BMEIS/spectrumdevice/tree/main/example_scripts">Examples</a></li>
<li><a href="https://pypi.org/project/spectrumdevice/">PyPi</a></li>
<li><a href="https://kcl-bmeis.github.io/spectrumdevice/">API reference documentation</a></li>
</ul>
</div>

                        <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">`spectrumdevice` is a high-level, object-oriented Python library for controlling Spectrum Instrumentation digitisers.</span>

<span class="sd">It can connect to individual digitisers or</span>
<span class="sd">[StarHubs](https://spectrum-instrumentation.com/en/m4i-star-hub) (e.g. the</span>
<span class="sd">[NetBox](https://spectrum-instrumentation.com/en/digitizernetbox)).</span>

<span class="sd">The main module `spectrumdevice` provides two classes `SpectrumCard` and `SpectrumStarHub` for controlling and receiving</span>
<span class="sd">data from individual digitisers and StarHubs respectively. Mock classes are also provided for testing software without</span>
<span class="sd">drivers installed or hardware connected.</span>

<span class="sd">The submodule `spectrumdevice.settings` provides Enums and Dataclasses wrapping the register values provided by the</span>
<span class="sd">Spectrum API, to be used for configuring hardware and interpreting responses received from hardware.</span>

<span class="sd">* [Source on GitHub](https://github.com/KCL-BMEIS/spectrumdevice)</span>
<span class="sd">* [README including quickstart](https://github.com/KCL-BMEIS/spectrumdevice/blob/main/README.md)</span>
<span class="sd">* [Examples](https://github.com/KCL-BMEIS/spectrumdevice/tree/main/example_scripts)</span>
<span class="sd">* [PyPi](https://pypi.org/project/spectrumdevice/)</span>
<span class="sd">* [API reference documentation](https://kcl-bmeis.github.io/spectrumdevice/)</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Christian Baker, King&#39;s College London</span>
<span class="c1"># Copyright (c) 2021 School of Biomedical Engineering &amp; Imaging Sciences, King&#39;s College London</span>
<span class="c1"># Licensed under the MIT. You may obtain a copy at https://opensource.org/licenses/MIT.</span>

<span class="kn">from</span> <span class="nn">.devices.measurement</span> <span class="kn">import</span> <span class="n">Measurement</span>
<span class="kn">from</span> <span class="nn">.devices.spectrum_device</span> <span class="kn">import</span> <span class="n">SpectrumDevice</span>
<span class="kn">from</span> <span class="nn">.devices.spectrum_card</span> <span class="kn">import</span> <span class="n">SpectrumCard</span>
<span class="kn">from</span> <span class="nn">.devices.spectrum_channel</span> <span class="kn">import</span> <span class="n">SpectrumChannel</span>
<span class="kn">from</span> <span class="nn">.devices.spectrum_star_hub</span> <span class="kn">import</span> <span class="n">SpectrumStarHub</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.devices.mocks</span> <span class="kn">import</span> <span class="n">MockSpectrumCard</span><span class="p">,</span> <span class="n">MockSpectrumStarHub</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;SpectrumDevice&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SpectrumCard&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SpectrumStarHub&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SpectrumChannel&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MockSpectrumCard&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MockSpectrumStarHub&quot;</span><span class="p">,</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Measurement&quot;</span><span class="p">,</span>
<span class="p">]</span>


<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">_version</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="n">_version</span><span class="o">.</span><span class="n">get_versions</span><span class="p">()[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
</pre></div>

        </details>

            </section>
                <section id="SpectrumDevice">
                                <div class="attr class">
        <a class="headerlink" href="#SpectrumDevice">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">SpectrumDevice</span><wbr>(<span class="base">spectrumdevice.devices.spectrum_interface.SpectrumDeviceInterface</span>, <span class="base">abc.ABC</span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SpectrumDevice</span><span class="p">(</span><span class="n">SpectrumDeviceInterface</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract superclass which implements methods common to all Spectrum digitiser devices. Instances of this class</span>
<span class="sd">    cannot be constructed directly. Instead, construct instances of the concrete classes `SpectrumCard`,</span>
<span class="sd">    `SpectrumStarHub`, `MockSpectrumCard` or `MockSpectrumStarHub`, which inherit the methods defined here. Note that</span>
<span class="sd">    the mock devices override several of the methods defined here.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visa_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">spectrum_handle_factory</span><span class="p">(</span><span class="n">visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform a software and hardware reset.</span>

<span class="sd">        All settings are set to hardware default values. The data in the board’s on-board memory will be no longer</span>
<span class="sd">        valid. Any output signals like trigger or clock output will be disabled.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_RESET</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start acquiring data.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), this will need to be called once for each acquisition. In-between</span>
<span class="sd">        calls, waveforms must be manually transferred from the device to a `TransferBuffer` using `start_transfer()`.</span>
<span class="sd">        The `TransferBuffer` need not be defined until after `start_acquisition` is called.</span>

<span class="sd">        In Multi FIFO mode (SPC_REC_FIFO_MULTI), it needs to be called only once, immediately followed by a call to</span>
<span class="sd">        `start_transfer()`. Frames will then be continuously streamed to the `TransferBuffer`, which must have already</span>
<span class="sd">        been defined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_START</span> <span class="o">|</span> <span class="n">M2CMD_CARD_ENABLETRIGGER</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop acquiring data when in FIFO mode.</span>

<span class="sd">        Stop the continuous acquisition of waveform data that occurs after calling `start_acquisition()` in FIFO mode</span>
<span class="sd">        (SPC_REC_FIFO_MULTI). Does not need to be called in Standard Single mode (SPC_REC_STD_SINGLE).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_STOP</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">configure_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">AcquisitionSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply all the settings contained in an `AcquisitionSettings` dataclass to the device.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings (`AcquisitionSettings`): An `AcquisitionSettings` dataclass containing the setting values to apply.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">acquisition_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sample_rate_in_hz</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">sample_rate_in_hz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acquisition_length_in_samples</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_post_trigger_length_in_samples</span><span class="p">(</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">-</span> <span class="n">settings</span><span class="o">.</span><span class="n">pre_trigger_length_in_samples</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_timeout_in_ms</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">timeout_in_ms</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_enabled_channels</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">channel</span><span class="p">,</span> <span class="n">v_range</span><span class="p">,</span> <span class="n">v_offset</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">vertical_ranges_in_mv</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">vertical_offsets_in_percent</span>
        <span class="p">):</span>
            <span class="n">channel</span><span class="o">.</span><span class="n">set_vertical_range_in_mv</span><span class="p">(</span><span class="n">v_range</span><span class="p">)</span>
            <span class="n">channel</span><span class="o">.</span><span class="n">set_vertical_offset_in_percent</span><span class="p">(</span><span class="n">v_offset</span><span class="p">)</span>

        <span class="c1"># Write the configuration to the card</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_WRITESETUP</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">timestamping_enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_timestamping</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">configure_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">TriggerSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply all the trigger settings contained in a `TriggerSettings` dataclass to the device.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings (`TriggerSettings`): A `TriggerSettings` dataclass containing the setting values to apply.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_sources</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">trigger_sources</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trigger_sources</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_SOURCES</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_external_trigger_mode</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_mode</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_level_in_mv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_level_in_mv</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_pulse_width_in_samples</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_pulse_width_in_samples</span><span class="p">)</span>

        <span class="c1"># Write the configuration to the card</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_WRITESETUP</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute_standard_single_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Measurement</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Carry out an single measurement in standard single mode and return the acquired waveforms.</span>

<span class="sd">        This method automatically carries out a standard single mode acquisition, including handling the creation</span>
<span class="sd">        of a `TransferBuffer` and the retrieval of the acquired waveforms. After being called, it will wait until a</span>
<span class="sd">        trigger event is received before carrying out the acquisition and then transferring and returning the acquired</span>
<span class="sd">        waveforms. The device must be configured in SPC_REC_STD_SINGLE acquisition mode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            measurement (Measurement): A Measurement object. The `.waveforms` attribute of `measurement` will be a list</span>
<span class="sd">                of 1D NumPy arrays, each array containing the waveform data received on one channel, in channel order.</span>
<span class="sd">                The Waveform object also has a timestamp attribute, which (if timestamping was enabled in acquisition</span>
<span class="sd">                settings) contains the time at which the acquisition was triggered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">!=</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_STD_SINGLE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumWrongAcquisitionMode</span><span class="p">(</span>
                <span class="s2">&quot;Set the acquisition mode to SPC_REC_STD_SINGLE using &quot;</span>
                <span class="s2">&quot;configure_acquisition() or set_acquisition_mode() before executing &quot;</span>
                <span class="s2">&quot;a standard single mode acquisition.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_acquisition_to_complete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_transfer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_transfer_to_complete</span><span class="p">()</span>
        <span class="n">waveforms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_acquisition</span><span class="p">()</span>  <span class="c1"># Only strictly required for Mock devices. Should have not effect on hardware.</span>
        <span class="k">return</span> <span class="n">Measurement</span><span class="p">(</span><span class="n">waveforms</span><span class="o">=</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">execute_finite_multi_fifo_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_measurements</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Measurement</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Carry out a finite number of Multi FIFO mode measurements and then stop the acquisitions.</span>

<span class="sd">        This method automatically carries out a defined number of measurement in Multi FIFO mode, including handling the</span>
<span class="sd">        creation of a `TransferBuffer`, streaming the acquired waveforms to the PC, terminating the acquisition and</span>
<span class="sd">        returning the acquired waveforms. After being called, it will wait for the requested number of triggers to be</span>
<span class="sd">        received, generating the correct number of measurements. It retrieves each measurement&#39;s waveforms from the</span>
<span class="sd">        `TransferBuffer` as they arrive. Once the requested number of measurements have been received, the acquisition</span>
<span class="sd">        is terminated and the waveforms are returned. The device must be configured in SPC_REC_FIFO_MULTI acquisition</span>
<span class="sd">        mode.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_measurements (int): The number of measurements to carry out, each triggered by subsequent trigger</span>
<span class="sd">                events.</span>
<span class="sd">        Returns:</span>
<span class="sd">            measurements (List[Measurement]): A list of Measurement objects with length `num_measurements`. Each</span>
<span class="sd">                Measurement object has a `waveforms` attribute containing a list of 1D NumPy arrays. Each array is a</span>
<span class="sd">                waveform acquired from one channel. The arrays are in channel order. The Waveform objects also have a</span>
<span class="sd">                timestamp attribute, which (if timestamping was enabled in acquisition settings) contains the time at</span>
<span class="sd">                which the acquisition was triggered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute_continuous_multi_fifo_acquisition</span><span class="p">()</span>
        <span class="n">measurements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_measurements</span><span class="p">):</span>
            <span class="n">measurements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Measurement</span><span class="p">(</span><span class="n">waveforms</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">(),</span> <span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_acquisition</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">measurements</span>

    <span class="k">def</span> <span class="nf">execute_continuous_multi_fifo_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start a continuous Multi FIFO mode acquisition.</span>

<span class="sd">        This method automatically starts acquiring and streaming samples in Multi FIFO mode, including handling the</span>
<span class="sd">        creation of a `TransferBuffer` and streaming the acquired waveforms to the PC. It will return almost</span>
<span class="sd">        instantaneously. The acquired waveforms must then be read out of the transfer buffer in a loop using the</span>
<span class="sd">        `get_waveforms()` method. Waveforms must be read at least as fast as they are being acquired.</span>
<span class="sd">        The FIFO acquisition and streaming will continue until `stop_acquisition()` is called. The device</span>
<span class="sd">        must be configured in SPC_REC_FIFO_MULTI acquisition mode.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">!=</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumWrongAcquisitionMode</span><span class="p">(</span>
                <span class="s2">&quot;Set the acquisition mode to SPC_REC_FIFO_MULTI using &quot;</span>
                <span class="s2">&quot;configure_acquisition() or set_acquisition_mode() before executing &quot;</span>
                <span class="s2">&quot;a multi fifo mode acquisition.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_transfer</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">write_to_spectrum_device_register</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spectrum_register</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">length</span><span class="p">:</span> <span class="n">SpectrumRegisterLength</span> <span class="o">=</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the value of a register on the Spectrum digitiser.</span>

<span class="sd">        This method is used internally by `SpectrumDevice` and its subclasses to configure a hardware device, but can</span>
<span class="sd">        also used to set the value of registers that are not implemented in `SpectrumDevice` and its subclasses.</span>

<span class="sd">        Args:</span>
<span class="sd">            spectrum_register (int): Identifier of the register to set. This should be a global constant imported from</span>
<span class="sd">                regs.py in the spectrum_gmbh package.</span>
<span class="sd">            value (int): Value to write to the register. This should be a global constant imported from</span>
<span class="sd">                regs.py in the spectrum_gmbh package.</span>
<span class="sd">            length (`SpectrumRegisterLength`): A `SpectrumRegisterLength` object specifying the length of the register</span>
<span class="sd">                to set, in bits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">SPECTRUM_DRIVERS_FOUND</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDriversNotFound</span><span class="p">(</span>
                <span class="s2">&quot;Cannot communicate with hardware. For testing on a system without drivers or connected hardware, use&quot;</span>
                <span class="s2">&quot; MockSpectrumCard instead.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">:</span>
                <span class="n">set_spectrum_i32_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">:</span>
                <span class="n">set_spectrum_i64_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Spectrum integer length not recognised.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDeviceNotConnected</span><span class="p">(</span><span class="s2">&quot;The device has been disconnected.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_spectrum_device_register</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spectrum_register</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">length</span><span class="p">:</span> <span class="n">SpectrumRegisterLength</span> <span class="o">=</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value of a register on the Spectrum digitiser.</span>

<span class="sd">        This method is used internally by `SpectrumDevice` and its subclasses to read the configuration of a hardware</span>
<span class="sd">        device, but can be also used to get the value of registers that are not implemented in</span>
<span class="sd">        SpectrumDevice and its subclasses.</span>

<span class="sd">        Args:</span>
<span class="sd">            spectrum_register (int): Identifier of the register to set. This should be a global constant imported from</span>
<span class="sd">                spectrum_gmbh.regs.</span>
<span class="sd">            length (`SpectrumRegisterLength`): A `SpectrumRegisterLength` object specifying the length of the register</span>
<span class="sd">                to set, in bits.</span>

<span class="sd">        Returns:</span>
<span class="sd">            value (int): Value of the register. This can be matched to a global constant imported from</span>
<span class="sd">                spectrum_gmbh.regs, usually using one of the Enums defined in the settings module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">SPECTRUM_DRIVERS_FOUND</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDriversNotFound</span><span class="p">(</span>
                <span class="s2">&quot;Cannot communicate with hardware. For testing on a system without drivers or connected hardware, use&quot;</span>
                <span class="s2">&quot; a MockSpectrumDevice instead (i.e. MockSpectrumCard or MockSpectrumStarHub).&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">get_spectrum_i32_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">get_spectrum_i64_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Spectrum integer length not recognised.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDeviceNotConnected</span><span class="p">(</span><span class="s2">&quot;The device has been disconnected.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Abstract superclass which implements methods common to all Spectrum digitiser devices. Instances of this class
cannot be constructed directly. Instead, construct instances of the concrete classes <code><a href="#SpectrumCard">SpectrumCard</a></code>,
<code><a href="#SpectrumStarHub">SpectrumStarHub</a></code>, <code><a href="#MockSpectrumCard">MockSpectrumCard</a></code> or <code><a href="#MockSpectrumStarHub">MockSpectrumStarHub</a></code>, which inherit the methods defined here. Note that
the mock devices override several of the methods defined here.</p>
</div>


                            <div id="SpectrumDevice.reset" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.reset">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">reset</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform a software and hardware reset.</span>

<span class="sd">        All settings are set to hardware default values. The data in the board’s on-board memory will be no longer</span>
<span class="sd">        valid. Any output signals like trigger or clock output will be disabled.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_RESET</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Perform a software and hardware reset.</p>

<p>All settings are set to hardware default values. The data in the board’s on-board memory will be no longer
valid. Any output signals like trigger or clock output will be disabled.</p>
</div>


                            </div>
                            <div id="SpectrumDevice.start_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.start_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">start_acquisition</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">start_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start acquiring data.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), this will need to be called once for each acquisition. In-between</span>
<span class="sd">        calls, waveforms must be manually transferred from the device to a `TransferBuffer` using `start_transfer()`.</span>
<span class="sd">        The `TransferBuffer` need not be defined until after `start_acquisition` is called.</span>

<span class="sd">        In Multi FIFO mode (SPC_REC_FIFO_MULTI), it needs to be called only once, immediately followed by a call to</span>
<span class="sd">        `start_transfer()`. Frames will then be continuously streamed to the `TransferBuffer`, which must have already</span>
<span class="sd">        been defined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_START</span> <span class="o">|</span> <span class="n">M2CMD_CARD_ENABLETRIGGER</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Start acquiring data.</p>

<p>In Standard Single mode (SPC_REC_STD_SINGLE), this will need to be called once for each acquisition. In-between
calls, waveforms must be manually transferred from the device to a <code>TransferBuffer</code> using <code><a href="#SpectrumDevice.start_transfer">start_transfer()</a></code>.
The <code>TransferBuffer</code> need not be defined until after <code><a href="#SpectrumDevice.start_acquisition">start_acquisition</a></code> is called.</p>

<p>In Multi FIFO mode (SPC_REC_FIFO_MULTI), it needs to be called only once, immediately followed by a call to
<code><a href="#SpectrumDevice.start_transfer">start_transfer()</a></code>. Frames will then be continuously streamed to the <code>TransferBuffer</code>, which must have already
been defined.</p>
</div>


                            </div>
                            <div id="SpectrumDevice.stop_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.stop_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_acquisition</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stop_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop acquiring data when in FIFO mode.</span>

<span class="sd">        Stop the continuous acquisition of waveform data that occurs after calling `start_acquisition()` in FIFO mode</span>
<span class="sd">        (SPC_REC_FIFO_MULTI). Does not need to be called in Standard Single mode (SPC_REC_STD_SINGLE).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_STOP</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Stop acquiring data when in FIFO mode.</p>

<p>Stop the continuous acquisition of waveform data that occurs after calling <code><a href="#SpectrumDevice.start_acquisition">start_acquisition()</a></code> in FIFO mode
(SPC_REC_FIFO_MULTI). Does not need to be called in Standard Single mode (SPC_REC_STD_SINGLE).</p>
</div>


                            </div>
                            <div id="SpectrumDevice.configure_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.configure_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">configure_acquisition</span><span class="signature">(self, settings: <a href="spectrumdevice/settings.html#AcquisitionSettings">spectrumdevice.settings.AcquisitionSettings</a>) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">configure_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">AcquisitionSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply all the settings contained in an `AcquisitionSettings` dataclass to the device.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings (`AcquisitionSettings`): An `AcquisitionSettings` dataclass containing the setting values to apply.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">acquisition_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sample_rate_in_hz</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">sample_rate_in_hz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acquisition_length_in_samples</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_post_trigger_length_in_samples</span><span class="p">(</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">-</span> <span class="n">settings</span><span class="o">.</span><span class="n">pre_trigger_length_in_samples</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_timeout_in_ms</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">timeout_in_ms</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_enabled_channels</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">channel</span><span class="p">,</span> <span class="n">v_range</span><span class="p">,</span> <span class="n">v_offset</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">vertical_ranges_in_mv</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">vertical_offsets_in_percent</span>
        <span class="p">):</span>
            <span class="n">channel</span><span class="o">.</span><span class="n">set_vertical_range_in_mv</span><span class="p">(</span><span class="n">v_range</span><span class="p">)</span>
            <span class="n">channel</span><span class="o">.</span><span class="n">set_vertical_offset_in_percent</span><span class="p">(</span><span class="n">v_offset</span><span class="p">)</span>

        <span class="c1"># Write the configuration to the card</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_WRITESETUP</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">timestamping_enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_timestamping</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Apply all the settings contained in an <code>AcquisitionSettings</code> dataclass to the device.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>settings (<code>AcquisitionSettings</code>):</strong>  An <code>AcquisitionSettings</code> dataclass containing the setting values to apply.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumDevice.configure_trigger" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.configure_trigger">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">configure_trigger</span><span class="signature">(self, settings: <a href="spectrumdevice/settings.html#TriggerSettings">spectrumdevice.settings.TriggerSettings</a>) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">configure_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">TriggerSettings</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply all the trigger settings contained in a `TriggerSettings` dataclass to the device.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings (`TriggerSettings`): A `TriggerSettings` dataclass containing the setting values to apply.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_trigger_sources</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">trigger_sources</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trigger_sources</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_SOURCES</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_external_trigger_mode</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_mode</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_level_in_mv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_level_in_mv</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_pulse_width_in_samples</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">external_trigger_pulse_width_in_samples</span><span class="p">)</span>

        <span class="c1"># Write the configuration to the card</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_WRITESETUP</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Apply all the trigger settings contained in a <code>TriggerSettings</code> dataclass to the device.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>settings (<code>TriggerSettings</code>):</strong>  A <code>TriggerSettings</code> dataclass containing the setting values to apply.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumDevice.execute_standard_single_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.execute_standard_single_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">execute_standard_single_acquisition</span><span class="signature">(self) -&gt; <a href="#devices.measurement.Measurement">spectrumdevice.devices.measurement.Measurement</a></span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">execute_standard_single_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Measurement</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Carry out an single measurement in standard single mode and return the acquired waveforms.</span>

<span class="sd">        This method automatically carries out a standard single mode acquisition, including handling the creation</span>
<span class="sd">        of a `TransferBuffer` and the retrieval of the acquired waveforms. After being called, it will wait until a</span>
<span class="sd">        trigger event is received before carrying out the acquisition and then transferring and returning the acquired</span>
<span class="sd">        waveforms. The device must be configured in SPC_REC_STD_SINGLE acquisition mode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            measurement (Measurement): A Measurement object. The `.waveforms` attribute of `measurement` will be a list</span>
<span class="sd">                of 1D NumPy arrays, each array containing the waveform data received on one channel, in channel order.</span>
<span class="sd">                The Waveform object also has a timestamp attribute, which (if timestamping was enabled in acquisition</span>
<span class="sd">                settings) contains the time at which the acquisition was triggered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">!=</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_STD_SINGLE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumWrongAcquisitionMode</span><span class="p">(</span>
                <span class="s2">&quot;Set the acquisition mode to SPC_REC_STD_SINGLE using &quot;</span>
                <span class="s2">&quot;configure_acquisition() or set_acquisition_mode() before executing &quot;</span>
                <span class="s2">&quot;a standard single mode acquisition.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_acquisition_to_complete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_transfer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_transfer_to_complete</span><span class="p">()</span>
        <span class="n">waveforms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_acquisition</span><span class="p">()</span>  <span class="c1"># Only strictly required for Mock devices. Should have not effect on hardware.</span>
        <span class="k">return</span> <span class="n">Measurement</span><span class="p">(</span><span class="n">waveforms</span><span class="o">=</span><span class="n">waveforms</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">())</span>
</pre></div>

        </details>

            <div class="docstring"><p>Carry out an single measurement in standard single mode and return the acquired waveforms.</p>

<p>This method automatically carries out a standard single mode acquisition, including handling the creation
of a <code>TransferBuffer</code> and the retrieval of the acquired waveforms. After being called, it will wait until a
trigger event is received before carrying out the acquisition and then transferring and returning the acquired
waveforms. The device must be configured in SPC_REC_STD_SINGLE acquisition mode.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>measurement (Measurement): A Measurement object. The <code>.waveforms</code> attribute of <code>measurement</code> will be a list
      of 1D NumPy arrays, each array containing the waveform data received on one channel, in channel order.
      The Waveform object also has a timestamp attribute, which (if timestamping was enabled in acquisition
      settings) contains the time at which the acquisition was triggered.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumDevice.execute_finite_multi_fifo_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.execute_finite_multi_fifo_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">execute_finite_multi_fifo_acquisition</span><span class="signature">(
    self,
    num_measurements: int
) -&gt; List[<a href="#devices.measurement.Measurement">spectrumdevice.devices.measurement.Measurement</a>]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">execute_finite_multi_fifo_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_measurements</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Measurement</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Carry out a finite number of Multi FIFO mode measurements and then stop the acquisitions.</span>

<span class="sd">        This method automatically carries out a defined number of measurement in Multi FIFO mode, including handling the</span>
<span class="sd">        creation of a `TransferBuffer`, streaming the acquired waveforms to the PC, terminating the acquisition and</span>
<span class="sd">        returning the acquired waveforms. After being called, it will wait for the requested number of triggers to be</span>
<span class="sd">        received, generating the correct number of measurements. It retrieves each measurement&#39;s waveforms from the</span>
<span class="sd">        `TransferBuffer` as they arrive. Once the requested number of measurements have been received, the acquisition</span>
<span class="sd">        is terminated and the waveforms are returned. The device must be configured in SPC_REC_FIFO_MULTI acquisition</span>
<span class="sd">        mode.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_measurements (int): The number of measurements to carry out, each triggered by subsequent trigger</span>
<span class="sd">                events.</span>
<span class="sd">        Returns:</span>
<span class="sd">            measurements (List[Measurement]): A list of Measurement objects with length `num_measurements`. Each</span>
<span class="sd">                Measurement object has a `waveforms` attribute containing a list of 1D NumPy arrays. Each array is a</span>
<span class="sd">                waveform acquired from one channel. The arrays are in channel order. The Waveform objects also have a</span>
<span class="sd">                timestamp attribute, which (if timestamping was enabled in acquisition settings) contains the time at</span>
<span class="sd">                which the acquisition was triggered.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execute_continuous_multi_fifo_acquisition</span><span class="p">()</span>
        <span class="n">measurements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_measurements</span><span class="p">):</span>
            <span class="n">measurements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Measurement</span><span class="p">(</span><span class="n">waveforms</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">(),</span> <span class="n">timestamp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_acquisition</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">measurements</span>
</pre></div>

        </details>

            <div class="docstring"><p>Carry out a finite number of Multi FIFO mode measurements and then stop the acquisitions.</p>

<p>This method automatically carries out a defined number of measurement in Multi FIFO mode, including handling the
creation of a <code>TransferBuffer</code>, streaming the acquired waveforms to the PC, terminating the acquisition and
returning the acquired waveforms. After being called, it will wait for the requested number of triggers to be
received, generating the correct number of measurements. It retrieves each measurement's waveforms from the
<code>TransferBuffer</code> as they arrive. Once the requested number of measurements have been received, the acquisition
is terminated and the waveforms are returned. The device must be configured in SPC_REC_FIFO_MULTI acquisition
mode.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>num_measurements (int):</strong>  The number of measurements to carry out, each triggered by subsequent trigger
events.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>measurements (List[Measurement]): A list of Measurement objects with length <code>num_measurements</code>. Each
      Measurement object has a <code>waveforms</code> attribute containing a list of 1D NumPy arrays. Each array is a
      waveform acquired from one channel. The arrays are in channel order. The Waveform objects also have a
      timestamp attribute, which (if timestamping was enabled in acquisition settings) contains the time at
      which the acquisition was triggered.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumDevice.execute_continuous_multi_fifo_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.execute_continuous_multi_fifo_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">execute_continuous_multi_fifo_acquisition</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">execute_continuous_multi_fifo_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start a continuous Multi FIFO mode acquisition.</span>

<span class="sd">        This method automatically starts acquiring and streaming samples in Multi FIFO mode, including handling the</span>
<span class="sd">        creation of a `TransferBuffer` and streaming the acquired waveforms to the PC. It will return almost</span>
<span class="sd">        instantaneously. The acquired waveforms must then be read out of the transfer buffer in a loop using the</span>
<span class="sd">        `get_waveforms()` method. Waveforms must be read at least as fast as they are being acquired.</span>
<span class="sd">        The FIFO acquisition and streaming will continue until `stop_acquisition()` is called. The device</span>
<span class="sd">        must be configured in SPC_REC_FIFO_MULTI acquisition mode.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">!=</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumWrongAcquisitionMode</span><span class="p">(</span>
                <span class="s2">&quot;Set the acquisition mode to SPC_REC_FIFO_MULTI using &quot;</span>
                <span class="s2">&quot;configure_acquisition() or set_acquisition_mode() before executing &quot;</span>
                <span class="s2">&quot;a multi fifo mode acquisition.&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_transfer</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Start a continuous Multi FIFO mode acquisition.</p>

<p>This method automatically starts acquiring and streaming samples in Multi FIFO mode, including handling the
creation of a <code>TransferBuffer</code> and streaming the acquired waveforms to the PC. It will return almost
instantaneously. The acquired waveforms must then be read out of the transfer buffer in a loop using the
<code><a href="#SpectrumDevice.get_waveforms">get_waveforms()</a></code> method. Waveforms must be read at least as fast as they are being acquired.
The FIFO acquisition and streaming will continue until <code><a href="#SpectrumDevice.stop_acquisition">stop_acquisition()</a></code> is called. The device
must be configured in SPC_REC_FIFO_MULTI acquisition mode.</p>
</div>


                            </div>
                            <div id="SpectrumDevice.write_to_spectrum_device_register" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.write_to_spectrum_device_register">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">write_to_spectrum_device_register</span><span class="signature">(
    self,
    spectrum_register: int,
    value: int,
    length: <a href="spectrumdevice/settings.html#SpectrumRegisterLength">spectrumdevice.settings.SpectrumRegisterLength</a> = THIRTY_TWO
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">write_to_spectrum_device_register</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spectrum_register</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">length</span><span class="p">:</span> <span class="n">SpectrumRegisterLength</span> <span class="o">=</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the value of a register on the Spectrum digitiser.</span>

<span class="sd">        This method is used internally by `SpectrumDevice` and its subclasses to configure a hardware device, but can</span>
<span class="sd">        also used to set the value of registers that are not implemented in `SpectrumDevice` and its subclasses.</span>

<span class="sd">        Args:</span>
<span class="sd">            spectrum_register (int): Identifier of the register to set. This should be a global constant imported from</span>
<span class="sd">                regs.py in the spectrum_gmbh package.</span>
<span class="sd">            value (int): Value to write to the register. This should be a global constant imported from</span>
<span class="sd">                regs.py in the spectrum_gmbh package.</span>
<span class="sd">            length (`SpectrumRegisterLength`): A `SpectrumRegisterLength` object specifying the length of the register</span>
<span class="sd">                to set, in bits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">SPECTRUM_DRIVERS_FOUND</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDriversNotFound</span><span class="p">(</span>
                <span class="s2">&quot;Cannot communicate with hardware. For testing on a system without drivers or connected hardware, use&quot;</span>
                <span class="s2">&quot; MockSpectrumCard instead.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">:</span>
                <span class="n">set_spectrum_i32_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">:</span>
                <span class="n">set_spectrum_i64_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Spectrum integer length not recognised.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDeviceNotConnected</span><span class="p">(</span><span class="s2">&quot;The device has been disconnected.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the value of a register on the Spectrum digitiser.</p>

<p>This method is used internally by <code><a href="#SpectrumDevice">SpectrumDevice</a></code> and its subclasses to configure a hardware device, but can
also used to set the value of registers that are not implemented in <code><a href="#SpectrumDevice">SpectrumDevice</a></code> and its subclasses.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>spectrum_register (int):</strong>  Identifier of the register to set. This should be a global constant imported from
regs.py in the spectrum_gmbh package.</li>
<li><strong>value (int):</strong>  Value to write to the register. This should be a global constant imported from
regs.py in the spectrum_gmbh package.</li>
<li><strong>length (<code>SpectrumRegisterLength</code>):</strong>  A <code>SpectrumRegisterLength</code> object specifying the length of the register
to set, in bits.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumDevice.read_spectrum_device_register" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumDevice.read_spectrum_device_register">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">read_spectrum_device_register</span><span class="signature">(
    self,
    spectrum_register: int,
    length: <a href="spectrumdevice/settings.html#SpectrumRegisterLength">spectrumdevice.settings.SpectrumRegisterLength</a> = THIRTY_TWO
) -&gt; int</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">read_spectrum_device_register</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spectrum_register</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">length</span><span class="p">:</span> <span class="n">SpectrumRegisterLength</span> <span class="o">=</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value of a register on the Spectrum digitiser.</span>

<span class="sd">        This method is used internally by `SpectrumDevice` and its subclasses to read the configuration of a hardware</span>
<span class="sd">        device, but can be also used to get the value of registers that are not implemented in</span>
<span class="sd">        SpectrumDevice and its subclasses.</span>

<span class="sd">        Args:</span>
<span class="sd">            spectrum_register (int): Identifier of the register to set. This should be a global constant imported from</span>
<span class="sd">                spectrum_gmbh.regs.</span>
<span class="sd">            length (`SpectrumRegisterLength`): A `SpectrumRegisterLength` object specifying the length of the register</span>
<span class="sd">                to set, in bits.</span>

<span class="sd">        Returns:</span>
<span class="sd">            value (int): Value of the register. This can be matched to a global constant imported from</span>
<span class="sd">                spectrum_gmbh.regs, usually using one of the Enums defined in the settings module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">SPECTRUM_DRIVERS_FOUND</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDriversNotFound</span><span class="p">(</span>
                <span class="s2">&quot;Cannot communicate with hardware. For testing on a system without drivers or connected hardware, use&quot;</span>
                <span class="s2">&quot; a MockSpectrumDevice instead (i.e. MockSpectrumCard or MockSpectrumStarHub).&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">THIRTY_TWO</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">get_spectrum_i32_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">length</span> <span class="o">==</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">get_spectrum_i64_api_param</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">spectrum_register</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Spectrum integer length not recognised.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumDeviceNotConnected</span><span class="p">(</span><span class="s2">&quot;The device has been disconnected.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get the value of a register on the Spectrum digitiser.</p>

<p>This method is used internally by <code><a href="#SpectrumDevice">SpectrumDevice</a></code> and its subclasses to read the configuration of a hardware
device, but can be also used to get the value of registers that are not implemented in
SpectrumDevice and its subclasses.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>spectrum_register (int):</strong>  Identifier of the register to set. This should be a global constant imported from
spectrum_gmbh.regs.</li>
<li><strong>length (<code>SpectrumRegisterLength</code>):</strong>  A <code>SpectrumRegisterLength</code> object specifying the length of the register
to set, in bits.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>value (int): Value of the register. This can be matched to a global constant imported from
      spectrum_gmbh.regs, usually using one of the Enums defined in the settings module.</p>
</blockquote>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>spectrumdevice.devices.spectrum_interface.SpectrumDeviceInterface</dt>
                                <dd id="SpectrumDevice.connected" class="variable">connected</dd>
                <dd id="SpectrumDevice.reconnect" class="function">reconnect</dd>
                <dd id="SpectrumDevice.status" class="variable">status</dd>
                <dd id="SpectrumDevice.wait_for_acquisition_to_complete" class="function">wait_for_acquisition_to_complete</dd>
                <dd id="SpectrumDevice.start_transfer" class="function">start_transfer</dd>
                <dd id="SpectrumDevice.stop_transfer" class="function">stop_transfer</dd>
                <dd id="SpectrumDevice.wait_for_transfer_to_complete" class="function">wait_for_transfer_to_complete</dd>
                <dd id="SpectrumDevice.disconnect" class="function">disconnect</dd>
                <dd id="SpectrumDevice.transfer_buffers" class="variable">transfer_buffers</dd>
                <dd id="SpectrumDevice.define_transfer_buffer" class="function">define_transfer_buffer</dd>
                <dd id="SpectrumDevice.get_waveforms" class="function">get_waveforms</dd>
                <dd id="SpectrumDevice.get_timestamp" class="function">get_timestamp</dd>
                <dd id="SpectrumDevice.enable_timestamping" class="function">enable_timestamping</dd>
                <dd id="SpectrumDevice.channels" class="variable">channels</dd>
                <dd id="SpectrumDevice.enabled_channels" class="variable">enabled_channels</dd>
                <dd id="SpectrumDevice.set_enabled_channels" class="function">set_enabled_channels</dd>
                <dd id="SpectrumDevice.acquisition_length_in_samples" class="variable">acquisition_length_in_samples</dd>
                <dd id="SpectrumDevice.set_acquisition_length_in_samples" class="function">set_acquisition_length_in_samples</dd>
                <dd id="SpectrumDevice.post_trigger_length_in_samples" class="variable">post_trigger_length_in_samples</dd>
                <dd id="SpectrumDevice.set_post_trigger_length_in_samples" class="function">set_post_trigger_length_in_samples</dd>
                <dd id="SpectrumDevice.acquisition_mode" class="variable">acquisition_mode</dd>
                <dd id="SpectrumDevice.set_acquisition_mode" class="function">set_acquisition_mode</dd>
                <dd id="SpectrumDevice.timeout_in_ms" class="variable">timeout_in_ms</dd>
                <dd id="SpectrumDevice.set_timeout_in_ms" class="function">set_timeout_in_ms</dd>
                <dd id="SpectrumDevice.trigger_sources" class="variable">trigger_sources</dd>
                <dd id="SpectrumDevice.set_trigger_sources" class="function">set_trigger_sources</dd>
                <dd id="SpectrumDevice.external_trigger_mode" class="variable">external_trigger_mode</dd>
                <dd id="SpectrumDevice.set_external_trigger_mode" class="function">set_external_trigger_mode</dd>
                <dd id="SpectrumDevice.external_trigger_level_in_mv" class="variable">external_trigger_level_in_mv</dd>
                <dd id="SpectrumDevice.set_external_trigger_level_in_mv" class="function">set_external_trigger_level_in_mv</dd>
                <dd id="SpectrumDevice.external_trigger_pulse_width_in_samples" class="variable">external_trigger_pulse_width_in_samples</dd>
                <dd id="SpectrumDevice.set_external_trigger_pulse_width_in_samples" class="function">set_external_trigger_pulse_width_in_samples</dd>
                <dd id="SpectrumDevice.apply_channel_enabling" class="function">apply_channel_enabling</dd>
                <dd id="SpectrumDevice.clock_mode" class="variable">clock_mode</dd>
                <dd id="SpectrumDevice.set_clock_mode" class="function">set_clock_mode</dd>
                <dd id="SpectrumDevice.sample_rate_in_hz" class="variable">sample_rate_in_hz</dd>
                <dd id="SpectrumDevice.set_sample_rate_in_hz" class="function">set_sample_rate_in_hz</dd>
                <dd id="SpectrumDevice.available_io_modes" class="variable">available_io_modes</dd>
                <dd id="SpectrumDevice.feature_list" class="variable">feature_list</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="SpectrumCard">
                                <div class="attr class">
        <a class="headerlink" href="#SpectrumCard">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">SpectrumCard</span><wbr>(<span class="base"><a href="#SpectrumDevice">spectrumdevice.SpectrumDevice</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SpectrumCard</span><span class="p">(</span><span class="n">SpectrumDevice</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for controlling individual Spectrum digitiser cards.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            device_number (int): Index of the card to control. If only one card is present, set to 0.</span>
<span class="sd">            ip_address (Optional[str]): If connecting to a networked card, provide the IP address here as a string.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ip_address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="n">_create_visa_string_from_ip</span><span class="p">(</span><span class="n">ip_address</span><span class="p">,</span> <span class="n">device_number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/dev/spcm</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span> <span class="o">=</span> <span class="n">CardType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_PCITYP</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_channels</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TransferBuffer</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_channel_enabling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Timestamper</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">enable_timestamping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="o">=</span> <span class="n">Timestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reconnect to the card after disconnect() has been called.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CARD_STATUS_TYPE</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read the current acquisition status of the card.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Statuses (`List[StatusCode]`): A list of `StatusCode` Enums describing the current acquisition status of the</span>
<span class="sd">                card. See `StatusCode` (and the Spectrum documentation) for the list off possible acquisition</span>
<span class="sd">                statuses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">decode_status</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2STATUS</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">wait_for_acquisition_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Blocks until the current acquisition has finished, or the timeout is reached.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), this should be called after `start_acquisition()`. Once the call</span>
<span class="sd">            to `wait_for_acquisition_to_complete()` returns, the newly acquired samples are in the on_device buffer and</span>
<span class="sd">            ready for transfer to the `TransferBuffer` using `start_transfer()`.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), the card will continue to acquire samples until</span>
<span class="sd">            `stop_acquisition()` is called, so `wait_for_acquisition_to_complete()` should not be used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_WAITREADY</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">start_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Transfer acquired waveforms from the on-device buffer to the `TransferBuffer`.</span>

<span class="sd">        Requires that a `TransferBuffer` has been defined (see `define_transfer_buffer()`).</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), `start_transfer()` should be called after each acquisition has</span>
<span class="sd">        completed.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), `start_transfer()` should be called immediately after `start_acquisition()`</span>
<span class="sd">        has been called, so that the waveform data can be continuously streamed into the transfer buffer as it is</span>
<span class="sd">        acquired.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_DATA_STARTDMA</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the transfer of samples from the on-device buffer to the `TransferBuffer`.</span>

<span class="sd">        Transfer is usually stopped automatically when an acquisition or stream of acquisitions completes, so this</span>
<span class="sd">        method is rarely required. It may invalidate transferred samples.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), transfer will automatically stop once all acquired samples have</span>
<span class="sd">        been transferred, so `stop_transfer()` should not be used. Instead, call `wait_for_transfer_to_complete()` after</span>
<span class="sd">        `start_transfer()`.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), samples are transferred continuously during acquisition,</span>
<span class="sd">        and transfer will automatically stop when `stop_acquisition()` is called as there will be no more</span>
<span class="sd">        samples to transfer, so `stop_transfer()` should not be used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_DATA_STOPDMA</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait_for_transfer_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Blocks until the currently active transfer of samples from the on-device buffers to the TransferBuffer is</span>
<span class="sd">        complete.</span>

<span class="sd">        Used in Standard Single mode (SPC_REC_STD_SINGLE) after starting a transfer. Once the method returns, all</span>
<span class="sd">        acquired waveforms have been transferred from the on_device buffer to the `TransferBuffer` and can be read using</span>
<span class="sd">        the `get_waveforms()` method.</span>

<span class="sd">        Not required in FIFO mode (SPC_REC_FIFO_MULTI) because samples are continuously streamed until</span>
<span class="sd">        `stop_acquisition()` is called.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_DATA_WAITDMA</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">transfer_buffers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TransferBuffer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the `TransferBuffer` object containing the latest transferred samples.</span>

<span class="sd">        Returns:</span>
<span class="sd">            buffer (List[`TransferBuffer`]): A length-1 list containing the `TransferBuffer` object. The samples within</span>
<span class="sd">                the `TransferBuffer` can be accessed using its own interface, but the samples are stored as a 1D array,</span>
<span class="sd">                with the samples of each channel interleaved. It is more convenient to read waveform data using the</span>
<span class="sd">                `get_waveforms()` method.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Cannot find TransferBuffer.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">define_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardToPCDataTransferBuffer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or provide a `CardToPCDataTransferBuffer` object for receiving acquired samples from the device.</span>

<span class="sd">        If no buffer is provided, one will be created with the correct size and a board_memory_offset_bytes of 0. A</span>
<span class="sd">        seperate buffer for transfering Timestamps will also be created using the Timestamper class.</span>

<span class="sd">        Args:</span>
<span class="sd">            buffer (Optional[List[`CardToPCDataTransferBuffer`]]): A length-1 list containing a pre-constructed</span>
<span class="sd">                `CardToPCDataTransferBuffer`  The size of the buffer should be chosen according to the current number of</span>
<span class="sd">                active channels and the acquisition length.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">CardToPCDataTransferBuffer</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">set_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_waveforms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">float_</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of the most recently transferred waveforms, in channel order.</span>

<span class="sd">        This method copies and reshapes the samples in the `TransferBuffer` into a list of 1D NumPy arrays (waveforms)</span>
<span class="sd">        and returns the list.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), `get_waveforms()` should be called after</span>
<span class="sd">        `wait_for_transfer_to_complete()` has returned.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), while the card is continuously acquiring samples and transferring them to the</span>
<span class="sd">        `TransferBuffer`, this method should be called in a loop . The method will block until each new transfer is</span>
<span class="sd">        received, so the loop will run at the same rate as the acquisition (in SPC_REC_FIFO_MULTI mode, for example,</span>
<span class="sd">        this would the rate at which your trigger source was running).</span>

<span class="sd">        Returns:</span>
<span class="sd">            waveforms (List[NDArray[float_]]): A list of 1D NumPy arrays, one for each channel enabled for the</span>
<span class="sd">                acquisition, ordered by channel number.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_available_bytes</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_transfer_to_complete</span><span class="p">()</span>
            <span class="n">num_available_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_DATA_AVAIL_USER_LEN</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">num_expected_bytes_per_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array_length_in_bytes</span>
            <span class="k">if</span> <span class="n">num_available_bytes</span> <span class="o">&gt;</span> <span class="n">num_expected_bytes_per_frame</span><span class="p">:</span>
                <span class="n">num_available_bytes</span> <span class="o">=</span> <span class="n">num_expected_bytes_per_frame</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Cannot find a samples transfer buffer&quot;</span><span class="p">)</span>

        <span class="n">waveforms_in_columns</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transfer_buffers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">copy_contents</span><span class="p">()</span>
            <span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_DATA_AVAIL_CARD_LEN</span><span class="p">,</span> <span class="n">num_available_bytes</span><span class="p">)</span>

        <span class="n">voltage_waveforms</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ch</span><span class="o">.</span><span class="n">convert_raw_waveform_to_voltage_waveform</span><span class="p">(</span><span class="n">waveform</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ch</span><span class="p">,</span> <span class="n">waveform</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">,</span> <span class="n">waveforms_in_columns</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">voltage_waveforms</span>

    <span class="k">def</span> <span class="nf">get_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get timestamp for the last acquisition&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Terminate the connection to the card.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
            <span class="n">destroy_handle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">connected</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if a card is currently connected, False if not.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SpectrumCard</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_handle</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SpectrumChannel</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple containing the channels that belong to the digitiser card.</span>

<span class="sd">        Properties of the individual channels (e.g. vertical range) can be set by calling the methods of the</span>
<span class="sd">            returned objects directly. See `SpectrumChannel` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            channels (Sequence[`SpectrumChannel`]): A tuple of `SpectrumChannel` objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The indices of the currently enabled channels.</span>
<span class="sd">        Returns:</span>
<span class="sd">            enabled_channels (List[int]): The indices of the currently enabled channels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span>

    <span class="k">def</span> <span class="nf">set_enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels_nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change which channels are enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            channels_nums (List[int]): The integer channel indices to enable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span> <span class="o">=</span> <span class="n">channels_nums</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_channel_enabling</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumInvalidNumberOfEnabledChannels</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">)</span><span class="si">}</span><span class="s2"> cannot be enabled at once.&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">trigger_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently enabled trigger sources</span>

<span class="sd">        Returns:</span>
<span class="sd">            sources (List[`TriggerSource`]): A list of TriggerSources.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">or_of_sources</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TRIG_ORMASK</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span> <span class="o">=</span> <span class="n">decode_trigger_sources</span><span class="p">(</span><span class="n">or_of_sources</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span>

    <span class="k">def</span> <span class="nf">set_trigger_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the enabled trigger sources.</span>

<span class="sd">        Args:</span>
<span class="sd">            sources (List[`TriggerSource`]): The TriggerSources to enable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span> <span class="o">=</span> <span class="n">sources</span>
        <span class="n">or_of_sources</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TRIG_ORMASK</span><span class="p">,</span> <span class="n">or_of_sources</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TRIG_ANDMASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExternalTriggerMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently enabled external trigger mode. An external trigger source must be enabled.</span>

<span class="sd">        Returns:</span>
<span class="sd">            sources (`ExternalTriggerMode`): The currently enabled `ExternalTriggerMode`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot get external trigger mode.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">first_trig_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ExternalTriggerMode</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_MODE_COMMANDS</span><span class="p">[</span><span class="n">first_trig_source</span><span class="o">.</span><span class="n">value</span><span class="p">])</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot get trigger mode of </span><span class="si">{</span><span class="n">first_trig_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_external_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ExternalTriggerMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the currently enabled trigger mode. An external trigger source must be enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ExternalTriggerMode`): The `ExternalTriggerMode` to apply.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot set external trigger mode.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trigger_source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span>
                        <span class="n">EXTERNAL_TRIGGER_MODE_COMMANDS</span><span class="p">[</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set trigger mode of </span><span class="si">{</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_active_external_triggers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">TriggerSource</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_MODE_COMMANDS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">([</span><span class="n">source</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_trigger_level_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The signal level (mV) needed to trigger an acquisition using an external trigger source. An external</span>
<span class="sd">        trigger source must be enabled.</span>

<span class="sd">        Returns:</span>
<span class="sd">            level (int): The currently set trigger level in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot get external trigger level.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">first_trig_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_LEVEL_COMMANDS</span><span class="p">[</span><span class="n">first_trig_source</span><span class="o">.</span><span class="n">value</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot get trigger level of </span><span class="si">{</span><span class="n">first_trig_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the signal level (mV) needed to trigger an acquisition using an external trigger source. An external</span>
<span class="sd">        trigger source must be enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            level (int): The trigger level to set in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot set external trigger level.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trigger_source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_LEVEL_COMMANDS</span><span class="p">[</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">level</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set trigger level of </span><span class="si">{</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The pulse width (in samples) needed to trigger an acquisition using an external trigger source, if</span>
<span class="sd">        SPC_TM_PW_SMALLER or SPC_TM_PW_GREATER `ExternalTriggerMode` is selected. An external trigger source must be</span>
<span class="sd">        enabled.</span>

<span class="sd">        Returns:</span>
<span class="sd">            width (int): The current trigger pulse width in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot get external trigger pulse width.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">first_trig_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span>
                    <span class="n">EXTERNAL_TRIGGER_PULSE_WIDTH_COMMANDS</span><span class="p">[</span><span class="n">first_trig_source</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot get pulse width of </span><span class="si">{</span><span class="n">first_trig_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the pulse width (samples) needed to trigger an acquisition using an external trigger source if</span>
<span class="sd">        SPC_TM_PW_SMALLER or SPC_TM_PW_GREATER `ExternalTriggerMode` is selected. An external trigger source must be</span>
<span class="sd">        enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (int): The trigger pulse width to set, in samples.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot set external trigger pulse width.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trigger_source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span>
                        <span class="n">EXTERNAL_TRIGGER_PULSE_WIDTH_COMMANDS</span><span class="p">[</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">width</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set pulse width of </span><span class="si">{</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_channel_enabling</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the enabled channels chosen using set_enable_channels(). This happens automatically and does not</span>
<span class="sd">        usually need to be called.&quot;&quot;&quot;</span>
        <span class="n">enabled_channel_spectrum_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">enabled_channel_spectrum_values</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span>
            <span class="n">bitwise_or_of_enabled_channels</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="n">enabled_channel_spectrum_values</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CHENABLE</span><span class="p">,</span> <span class="n">bitwise_or_of_enabled_channels</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumInvalidNumberOfEnabledChannels</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot enable </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">enabled_channel_spectrum_values</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span> <span class="sa">f</span><span class="s2">&quot;channels on one card.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_init_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SpectrumChannel</span><span class="p">]:</span>
        <span class="n">num_modules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MIINST_MODULES</span><span class="p">)</span>
        <span class="n">num_channels_per_module</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MIINST_CHPERMODULE</span><span class="p">)</span>
        <span class="n">total_channels</span> <span class="o">=</span> <span class="n">num_modules</span> <span class="o">*</span> <span class="n">num_channels_per_module</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">SpectrumChannel</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total_channels</span><span class="p">)])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The current recording length (per channel) in samples.</span>

<span class="sd">        Returns:</span>
<span class="sd">            length_in_samples (int): The current recording length (&#39;acquisition length&#39;) in samples.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MEMSIZE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the recording length (per channel). In FIFO mode, it will be quantised according to the step size</span>
<span class="sd">          allowed by the connected card type.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired recording length (&#39;acquisition length&#39;), in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">length_in_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coerce_num_samples_if_fifo</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SEGMENTSIZE</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MEMSIZE</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">post_trigger_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The number of samples of the recording that will contain data received after the trigger event.</span>

<span class="sd">        Returns:</span>
<span class="sd">            length_in_samples (int): The currently set post trigger length in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_POSTTRIGGER</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_post_trigger_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the number of samples of the recording that will contain data received after the trigger event.</span>
<span class="sd">        In FIFO mode, this will be quantised according to the minimum step size allowed by the connected card.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired post trigger length in samples.&quot;&quot;&quot;</span>
        <span class="n">length_in_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coerce_num_samples_if_fifo</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">-</span> <span class="n">length_in_samples</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;FIFO mode: coercing post trigger length to maximum allowed value (step-size samples less than &quot;</span>
                    <span class="s2">&quot;the acquisition length).&quot;</span>
                <span class="p">)</span>
                <span class="n">length_in_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">-</span> <span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_POSTTRIGGER</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_coerce_num_samples_if_fifo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">mod</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">)):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;FIFO mode: coercing length to nearest </span><span class="si">{</span><span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="sa">f</span><span class="s2">&quot; samples&quot;</span>
                <span class="p">)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">mod</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AcquisitionMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently enabled card mode. Will raise an exception if the current mode is not supported by</span>
<span class="sd">        `spectrumdevice`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            mode (`AcquisitionMode`): The currently enabled card acquisition mode.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AcquisitionMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CARDMODE</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the currently enabled card mode. See `AcquisitionMode` and the Spectrum documentation</span>
<span class="sd">        for the available modes.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`AcquisitionMode`): The desired acquisition mode.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CARDMODE</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timeout_in_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The time for which the card will wait for a trigger to tbe received after an acquisition has started</span>
<span class="sd">        before returning an error.</span>

<span class="sd">        Returns:</span>
<span class="sd">            timeout_in_ms (in)t: The currently set acquisition timeout in ms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TIMEOUT</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_timeout_in_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_in_ms</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the time for which the card will wait for a trigger to tbe received after an acquisition has started</span>
<span class="sd">        before returning an error.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout_in_ms (int): The desired acquisition timeout in ms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TIMEOUT</span><span class="p">,</span> <span class="n">timeout_in_ms</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clock_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClockMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently enabled clock mode.</span>

<span class="sd">        Returns:</span>
<span class="sd">            mode (`ClockMode`): The currently set clock mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ClockMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CLOCKMODE</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_clock_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ClockMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the clock mode. See `ClockMode` and the Spectrum documentation for available modes.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ClockMode`): The desired clock mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CLOCKMODE</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_io_modes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AvailableIOModes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For each multipurpose IO line on the card, read the available modes. See IOLineMode and the Spectrum</span>
<span class="sd">        Documentation for all possible available modes and their meanings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            modes (`AvailableIOModes`): An `AvailableIOModes` dataclass containing the modes for each IO line.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AvailableIOModes</span><span class="p">(</span>
            <span class="n">X0</span><span class="o">=</span><span class="n">decode_available_io_modes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPCM_X0_AVAILMODES</span><span class="p">)),</span>
            <span class="n">X1</span><span class="o">=</span><span class="n">decode_available_io_modes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPCM_X1_AVAILMODES</span><span class="p">)),</span>
            <span class="n">X2</span><span class="o">=</span><span class="n">decode_available_io_modes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPCM_X2_AVAILMODES</span><span class="p">)),</span>
            <span class="n">X3</span><span class="o">=</span><span class="n">decode_available_io_modes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPCM_X3_AVAILMODES</span><span class="p">)),</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">feature_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardFeature</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">AdvancedCardFeature</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of the features of the card. See `CardFeature`, `AdvancedCardFeature` and the Spectrum</span>
<span class="sd">        documentation for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            features (List[Tuple[List[`CardFeature`], List[`AdvancedCardFeature`]]]): A tuple of two lists - of features</span>
<span class="sd">                and advanced features respectively - wrapped in a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">normal_features</span> <span class="o">=</span> <span class="n">decode_card_features</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_PCIFEATURES</span><span class="p">))</span>
        <span class="n">advanced_features</span> <span class="o">=</span> <span class="n">decode_advanced_card_features</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_PCIEXTFEATURES</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">normal_features</span><span class="p">,</span> <span class="n">advanced_features</span><span class="p">)]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The rate at which samples will be acquired during an acquisition, in Hz.</span>

<span class="sd">        Returns:</span>
<span class="sd">            rate (int): The currently set sample rate in Hz.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SAMPLERATE</span><span class="p">,</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the rate at which samples will be acquired during an acquisition, in Hz.</span>
<span class="sd">        Args:</span>
<span class="sd">            rate (int): The desired sample rate in Hz.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SAMPLERATE</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Card </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

        </details>

            <div class="docstring"><p>Class for controlling individual Spectrum digitiser cards.</p>
</div>


                            <div id="SpectrumCard.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">SpectrumCard</span><span class="signature">(device_number: int = 0, ip_address: Optional[str] = None)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ip_address</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            device_number (int): Index of the card to control. If only one card is present, set to 0.</span>
<span class="sd">            ip_address (Optional[str]): If connecting to a networked card, provide the IP address here as a string.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ip_address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="n">_create_visa_string_from_ip</span><span class="p">(</span><span class="n">ip_address</span><span class="p">,</span> <span class="n">device_number</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/dev/spcm</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span> <span class="o">=</span> <span class="n">CardType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_PCITYP</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_channels</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TransferBuffer</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_channel_enabling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Timestamper</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><h6 id="args">Args</h6>

<ul>
<li><strong>device_number (int):</strong>  Index of the card to control. If only one card is present, set to 0.</li>
<li><strong>ip_address (Optional[str]):</strong>  If connecting to a networked card, provide the IP address here as a string.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.enable_timestamping" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.enable_timestamping">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">enable_timestamping</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">enable_timestamping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="o">=</span> <span class="n">Timestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="SpectrumCard.reconnect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.reconnect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">reconnect</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reconnect to the card after disconnect() has been called.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reconnect to the card after disconnect() has been called.</p>
</div>


                            </div>
                            <div id="SpectrumCard.status" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.status">#&nbsp;&nbsp</a>

        <span class="name">status</span><span class="annotation">: List[<a href="spectrumdevice/settings.html#status.StatusCode">spectrumdevice.settings.status.StatusCode</a>]</span>
    </div>

            <div class="docstring"><p>Read the current acquisition status of the card.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>Statuses (<code>List[StatusCode]</code>): A list of <code>StatusCode</code> Enums describing the current acquisition status of the
      card. See <code>StatusCode</code> (and the Spectrum documentation) for the list off possible acquisition
      statuses.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.wait_for_acquisition_to_complete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.wait_for_acquisition_to_complete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">wait_for_acquisition_to_complete</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">wait_for_acquisition_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Blocks until the current acquisition has finished, or the timeout is reached.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), this should be called after `start_acquisition()`. Once the call</span>
<span class="sd">            to `wait_for_acquisition_to_complete()` returns, the newly acquired samples are in the on_device buffer and</span>
<span class="sd">            ready for transfer to the `TransferBuffer` using `start_transfer()`.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), the card will continue to acquire samples until</span>
<span class="sd">            `stop_acquisition()` is called, so `wait_for_acquisition_to_complete()` should not be used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_CARD_WAITREADY</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Blocks until the current acquisition has finished, or the timeout is reached.</p>

<p>In Standard Single mode (SPC_REC_STD_SINGLE), this should be called after <code><a href="#SpectrumCard.start_acquisition">start_acquisition()</a></code>. Once the call
    to <code><a href="#SpectrumCard.wait_for_acquisition_to_complete">wait_for_acquisition_to_complete()</a></code> returns, the newly acquired samples are in the on_device buffer and
    ready for transfer to the <code>TransferBuffer</code> using <code><a href="#SpectrumCard.start_transfer">start_transfer()</a></code>.</p>

<p>In FIFO mode (SPC_REC_FIFO_MULTI), the card will continue to acquire samples until
    <code><a href="#SpectrumCard.stop_acquisition">stop_acquisition()</a></code> is called, so <code><a href="#SpectrumCard.wait_for_acquisition_to_complete">wait_for_acquisition_to_complete()</a></code> should not be used.</p>
</div>


                            </div>
                            <div id="SpectrumCard.start_transfer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.start_transfer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">start_transfer</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">start_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Transfer acquired waveforms from the on-device buffer to the `TransferBuffer`.</span>

<span class="sd">        Requires that a `TransferBuffer` has been defined (see `define_transfer_buffer()`).</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), `start_transfer()` should be called after each acquisition has</span>
<span class="sd">        completed.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), `start_transfer()` should be called immediately after `start_acquisition()`</span>
<span class="sd">        has been called, so that the waveform data can be continuously streamed into the transfer buffer as it is</span>
<span class="sd">        acquired.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_DATA_STARTDMA</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Transfer acquired waveforms from the on-device buffer to the <code>TransferBuffer</code>.</p>

<p>Requires that a <code>TransferBuffer</code> has been defined (see <code><a href="#SpectrumCard.define_transfer_buffer">define_transfer_buffer()</a></code>).</p>

<p>In Standard Single mode (SPC_REC_STD_SINGLE), <code><a href="#SpectrumCard.start_transfer">start_transfer()</a></code> should be called after each acquisition has
completed.</p>

<p>In FIFO mode (SPC_REC_FIFO_MULTI), <code><a href="#SpectrumCard.start_transfer">start_transfer()</a></code> should be called immediately after <code><a href="#SpectrumCard.start_acquisition">start_acquisition()</a></code>
has been called, so that the waveform data can be continuously streamed into the transfer buffer as it is
acquired.</p>
</div>


                            </div>
                            <div id="SpectrumCard.stop_transfer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.stop_transfer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_transfer</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stop_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the transfer of samples from the on-device buffer to the `TransferBuffer`.</span>

<span class="sd">        Transfer is usually stopped automatically when an acquisition or stream of acquisitions completes, so this</span>
<span class="sd">        method is rarely required. It may invalidate transferred samples.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), transfer will automatically stop once all acquired samples have</span>
<span class="sd">        been transferred, so `stop_transfer()` should not be used. Instead, call `wait_for_transfer_to_complete()` after</span>
<span class="sd">        `start_transfer()`.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), samples are transferred continuously during acquisition,</span>
<span class="sd">        and transfer will automatically stop when `stop_acquisition()` is called as there will be no more</span>
<span class="sd">        samples to transfer, so `stop_transfer()` should not be used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_DATA_STOPDMA</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Stop the transfer of samples from the on-device buffer to the <code>TransferBuffer</code>.</p>

<p>Transfer is usually stopped automatically when an acquisition or stream of acquisitions completes, so this
method is rarely required. It may invalidate transferred samples.</p>

<p>In Standard Single mode (SPC_REC_STD_SINGLE), transfer will automatically stop once all acquired samples have
been transferred, so <code><a href="#SpectrumCard.stop_transfer">stop_transfer()</a></code> should not be used. Instead, call <code><a href="#SpectrumCard.wait_for_transfer_to_complete">wait_for_transfer_to_complete()</a></code> after
<code><a href="#SpectrumCard.start_transfer">start_transfer()</a></code>.</p>

<p>In FIFO mode (SPC_REC_FIFO_MULTI), samples are transferred continuously during acquisition,
and transfer will automatically stop when <code><a href="#SpectrumCard.stop_acquisition">stop_acquisition()</a></code> is called as there will be no more
samples to transfer, so <code><a href="#SpectrumCard.stop_transfer">stop_transfer()</a></code> should not be used.</p>
</div>


                            </div>
                            <div id="SpectrumCard.wait_for_transfer_to_complete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.wait_for_transfer_to_complete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">wait_for_transfer_to_complete</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">wait_for_transfer_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Blocks until the currently active transfer of samples from the on-device buffers to the TransferBuffer is</span>
<span class="sd">        complete.</span>

<span class="sd">        Used in Standard Single mode (SPC_REC_STD_SINGLE) after starting a transfer. Once the method returns, all</span>
<span class="sd">        acquired waveforms have been transferred from the on_device buffer to the `TransferBuffer` and can be read using</span>
<span class="sd">        the `get_waveforms()` method.</span>

<span class="sd">        Not required in FIFO mode (SPC_REC_FIFO_MULTI) because samples are continuously streamed until</span>
<span class="sd">        `stop_acquisition()` is called.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_M2CMD</span><span class="p">,</span> <span class="n">M2CMD_DATA_WAITDMA</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Blocks until the currently active transfer of samples from the on-device buffers to the TransferBuffer is
complete.</p>

<p>Used in Standard Single mode (SPC_REC_STD_SINGLE) after starting a transfer. Once the method returns, all
acquired waveforms have been transferred from the on_device buffer to the <code>TransferBuffer</code> and can be read using
the <code><a href="#SpectrumCard.get_waveforms">get_waveforms()</a></code> method.</p>

<p>Not required in FIFO mode (SPC_REC_FIFO_MULTI) because samples are continuously streamed until
<code><a href="#SpectrumCard.stop_acquisition">stop_acquisition()</a></code> is called.</p>
</div>


                            </div>
                            <div id="SpectrumCard.transfer_buffers" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.transfer_buffers">#&nbsp;&nbsp</a>

        <span class="name">transfer_buffers</span><span class="annotation">: List[<a href="spectrumdevice/settings.html#transfer_buffer.TransferBuffer">spectrumdevice.settings.transfer_buffer.TransferBuffer</a>]</span>
    </div>

            <div class="docstring"><p>Return the <code>TransferBuffer</code> object containing the latest transferred samples.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>buffer (List[<code>TransferBuffer</code>]): A length-1 list containing the <code>TransferBuffer</code> object. The samples within
      the <code>TransferBuffer</code> can be accessed using its own interface, but the samples are stored as a 1D array,
      with the samples of each channel interleaved. It is more convenient to read waveform data using the
      <code><a href="#SpectrumCard.get_waveforms">get_waveforms()</a></code> method.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.define_transfer_buffer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.define_transfer_buffer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">define_transfer_buffer</span><span class="signature">(
    self,
    buffer: Optional[List[<a href="spectrumdevice/settings.html#transfer_buffer.CardToPCDataTransferBuffer">spectrumdevice.settings.transfer_buffer.CardToPCDataTransferBuffer</a>]] = None
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">define_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardToPCDataTransferBuffer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or provide a `CardToPCDataTransferBuffer` object for receiving acquired samples from the device.</span>

<span class="sd">        If no buffer is provided, one will be created with the correct size and a board_memory_offset_bytes of 0. A</span>
<span class="sd">        seperate buffer for transfering Timestamps will also be created using the Timestamper class.</span>

<span class="sd">        Args:</span>
<span class="sd">            buffer (Optional[List[`CardToPCDataTransferBuffer`]]): A length-1 list containing a pre-constructed</span>
<span class="sd">                `CardToPCDataTransferBuffer`  The size of the buffer should be chosen according to the current number of</span>
<span class="sd">                active channels and the acquisition length.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">CardToPCDataTransferBuffer</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">set_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create or provide a <code>CardToPCDataTransferBuffer</code> object for receiving acquired samples from the device.</p>

<p>If no buffer is provided, one will be created with the correct size and a board_memory_offset_bytes of 0. A
seperate buffer for transfering Timestamps will also be created using the Timestamper class.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>buffer (Optional[List[<code>CardToPCDataTransferBuffer</code>]]):</strong>  A length-1 list containing a pre-constructed
<code>CardToPCDataTransferBuffer</code>  The size of the buffer should be chosen according to the current number of
active channels and the acquisition length.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.get_waveforms" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.get_waveforms">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_waveforms</span><span class="signature">(self) -&gt; List[numpy.ndarray[Any, numpy.dtype[numpy.float64]]]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_waveforms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">float_</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of the most recently transferred waveforms, in channel order.</span>

<span class="sd">        This method copies and reshapes the samples in the `TransferBuffer` into a list of 1D NumPy arrays (waveforms)</span>
<span class="sd">        and returns the list.</span>

<span class="sd">        In Standard Single mode (SPC_REC_STD_SINGLE), `get_waveforms()` should be called after</span>
<span class="sd">        `wait_for_transfer_to_complete()` has returned.</span>

<span class="sd">        In FIFO mode (SPC_REC_FIFO_MULTI), while the card is continuously acquiring samples and transferring them to the</span>
<span class="sd">        `TransferBuffer`, this method should be called in a loop . The method will block until each new transfer is</span>
<span class="sd">        received, so the loop will run at the same rate as the acquisition (in SPC_REC_FIFO_MULTI mode, for example,</span>
<span class="sd">        this would the rate at which your trigger source was running).</span>

<span class="sd">        Returns:</span>
<span class="sd">            waveforms (List[NDArray[float_]]): A list of 1D NumPy arrays, one for each channel enabled for the</span>
<span class="sd">                acquisition, ordered by channel number.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_available_bytes</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_transfer_to_complete</span><span class="p">()</span>
            <span class="n">num_available_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_DATA_AVAIL_USER_LEN</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">num_expected_bytes_per_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array_length_in_bytes</span>
            <span class="k">if</span> <span class="n">num_available_bytes</span> <span class="o">&gt;</span> <span class="n">num_expected_bytes_per_frame</span><span class="p">:</span>
                <span class="n">num_available_bytes</span> <span class="o">=</span> <span class="n">num_expected_bytes_per_frame</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Cannot find a samples transfer buffer&quot;</span><span class="p">)</span>

        <span class="n">waveforms_in_columns</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transfer_buffers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="o">.</span><span class="n">copy_contents</span><span class="p">()</span>
            <span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)))</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_DATA_AVAIL_CARD_LEN</span><span class="p">,</span> <span class="n">num_available_bytes</span><span class="p">)</span>

        <span class="n">voltage_waveforms</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ch</span><span class="o">.</span><span class="n">convert_raw_waveform_to_voltage_waveform</span><span class="p">(</span><span class="n">waveform</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ch</span><span class="p">,</span> <span class="n">waveform</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">,</span> <span class="n">waveforms_in_columns</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">voltage_waveforms</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get a list of the most recently transferred waveforms, in channel order.</p>

<p>This method copies and reshapes the samples in the <code>TransferBuffer</code> into a list of 1D NumPy arrays (waveforms)
and returns the list.</p>

<p>In Standard Single mode (SPC_REC_STD_SINGLE), <code><a href="#SpectrumCard.get_waveforms">get_waveforms()</a></code> should be called after
<code><a href="#SpectrumCard.wait_for_transfer_to_complete">wait_for_transfer_to_complete()</a></code> has returned.</p>

<p>In FIFO mode (SPC_REC_FIFO_MULTI), while the card is continuously acquiring samples and transferring them to the
<code>TransferBuffer</code>, this method should be called in a loop . The method will block until each new transfer is
received, so the loop will run at the same rate as the acquisition (in SPC_REC_FIFO_MULTI mode, for example,
this would the rate at which your trigger source was running).</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>waveforms (List[NDArray[float_]]): A list of 1D NumPy arrays, one for each channel enabled for the
      acquisition, ordered by channel number.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.get_timestamp" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.get_timestamp">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_timestamp</span><span class="signature">(self) -&gt; Optional[datetime.datetime]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get timestamp for the last acquisition&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get timestamp for the last acquisition</p>
</div>


                            </div>
                            <div id="SpectrumCard.disconnect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.disconnect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">disconnect</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Terminate the connection to the card.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">connected</span><span class="p">:</span>
            <span class="n">destroy_handle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>

        </details>

            <div class="docstring"><p>Terminate the connection to the card.</p>
</div>


                            </div>
                            <div id="SpectrumCard.connected" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.connected">#&nbsp;&nbsp</a>

        <span class="name">connected</span><span class="annotation">: bool</span>
    </div>

            <div class="docstring"><p>Returns True if a card is currently connected, False if not.</p>
</div>


                            </div>
                            <div id="SpectrumCard.channels" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.channels">#&nbsp;&nbsp</a>

        <span class="name">channels</span><span class="annotation">: Sequence[<a href="#devices.spectrum_channel.SpectrumChannel">spectrumdevice.devices.spectrum_channel.SpectrumChannel</a>]</span>
    </div>

            <div class="docstring"><p>A tuple containing the channels that belong to the digitiser card.</p>

<p>Properties of the individual channels (e.g. vertical range) can be set by calling the methods of the
    returned objects directly. See <code><a href="#SpectrumChannel">SpectrumChannel</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>channels (Sequence[<code><a href="#SpectrumChannel">SpectrumChannel</a></code>]): A tuple of <code><a href="#SpectrumChannel">SpectrumChannel</a></code> objects.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.enabled_channels" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.enabled_channels">#&nbsp;&nbsp</a>

        <span class="name">enabled_channels</span><span class="annotation">: List[int]</span>
    </div>

            <div class="docstring"><p>The indices of the currently enabled channels.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>enabled_channels (List[int]): The indices of the currently enabled channels.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_enabled_channels" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_enabled_channels">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_enabled_channels</span><span class="signature">(self, channels_nums: List[int]) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels_nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change which channels are enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            channels_nums (List[int]): The integer channel indices to enable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span> <span class="o">=</span> <span class="n">channels_nums</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_channel_enabling</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumInvalidNumberOfEnabledChannels</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">)</span><span class="si">}</span><span class="s2"> cannot be enabled at once.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change which channels are enabled.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>channels_nums (List[int]):</strong>  The integer channel indices to enable.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.trigger_sources" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.trigger_sources">#&nbsp;&nbsp</a>

        <span class="name">trigger_sources</span><span class="annotation">: List[<a href="spectrumdevice/settings.html#triggering.TriggerSource">spectrumdevice.settings.triggering.TriggerSource</a>]</span>
    </div>

            <div class="docstring"><p>The currently enabled trigger sources</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>sources (List[<code>TriggerSource</code>]): A list of TriggerSources.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_trigger_sources" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_trigger_sources">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_trigger_sources</span><span class="signature">(
    self,
    sources: List[<a href="spectrumdevice/settings.html#triggering.TriggerSource">spectrumdevice.settings.triggering.TriggerSource</a>]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_trigger_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the enabled trigger sources.</span>

<span class="sd">        Args:</span>
<span class="sd">            sources (List[`TriggerSource`]): The TriggerSources to enable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_trigger_sources</span> <span class="o">=</span> <span class="n">sources</span>
        <span class="n">or_of_sources</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TRIG_ORMASK</span><span class="p">,</span> <span class="n">or_of_sources</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TRIG_ANDMASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the enabled trigger sources.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>sources (List[<code>TriggerSource</code>]):</strong>  The TriggerSources to enable.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.external_trigger_mode" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.external_trigger_mode">#&nbsp;&nbsp</a>

        <span class="name">external_trigger_mode</span><span class="annotation">: <a href="spectrumdevice/settings.html#triggering.ExternalTriggerMode">spectrumdevice.settings.triggering.ExternalTriggerMode</a></span>
    </div>

            <div class="docstring"><p>The currently enabled external trigger mode. An external trigger source must be enabled.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>sources (<code>ExternalTriggerMode</code>): The currently enabled <code>ExternalTriggerMode</code>.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_external_trigger_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_external_trigger_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_external_trigger_mode</span><span class="signature">(
    self,
    mode: <a href="spectrumdevice/settings.html#triggering.ExternalTriggerMode">spectrumdevice.settings.triggering.ExternalTriggerMode</a>
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_external_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ExternalTriggerMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the currently enabled trigger mode. An external trigger source must be enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ExternalTriggerMode`): The `ExternalTriggerMode` to apply.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot set external trigger mode.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trigger_source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span>
                        <span class="n">EXTERNAL_TRIGGER_MODE_COMMANDS</span><span class="p">[</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set trigger mode of </span><span class="si">{</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the currently enabled trigger mode. An external trigger source must be enabled.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>mode (<code>ExternalTriggerMode</code>):</strong>  The <code>ExternalTriggerMode</code> to apply.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.external_trigger_level_in_mv" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.external_trigger_level_in_mv">#&nbsp;&nbsp</a>

        <span class="name">external_trigger_level_in_mv</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The signal level (mV) needed to trigger an acquisition using an external trigger source. An external
trigger source must be enabled.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>level (int): The currently set trigger level in mV.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_external_trigger_level_in_mv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_external_trigger_level_in_mv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_external_trigger_level_in_mv</span><span class="signature">(self, level: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the signal level (mV) needed to trigger an acquisition using an external trigger source. An external</span>
<span class="sd">        trigger source must be enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            level (int): The trigger level to set in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot set external trigger level.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trigger_source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">EXTERNAL_TRIGGER_LEVEL_COMMANDS</span><span class="p">[</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">level</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set trigger level of </span><span class="si">{</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the signal level (mV) needed to trigger an acquisition using an external trigger source. An external
trigger source must be enabled.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>level (int):</strong>  The trigger level to set in mV.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.external_trigger_pulse_width_in_samples" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.external_trigger_pulse_width_in_samples">#&nbsp;&nbsp</a>

        <span class="name">external_trigger_pulse_width_in_samples</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The pulse width (in samples) needed to trigger an acquisition using an external trigger source, if
SPC_TM_PW_SMALLER or SPC_TM_PW_GREATER <code>ExternalTriggerMode</code> is selected. An external trigger source must be
enabled.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>width (int): The current trigger pulse width in samples.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_external_trigger_pulse_width_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_external_trigger_pulse_width_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_external_trigger_pulse_width_in_samples</span><span class="signature">(self, width: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the pulse width (samples) needed to trigger an acquisition using an external trigger source if</span>
<span class="sd">        SPC_TM_PW_SMALLER or SPC_TM_PW_GREATER `ExternalTriggerMode` is selected. An external trigger source must be</span>
<span class="sd">        enabled.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (int): The trigger pulse width to set, in samples.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumExternalTriggerNotEnabled</span><span class="p">(</span><span class="s2">&quot;Cannot set external trigger pulse width.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trigger_source</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_external_triggers</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span>
                        <span class="n">EXTERNAL_TRIGGER_PULSE_WIDTH_COMMANDS</span><span class="p">[</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">value</span><span class="p">],</span> <span class="n">width</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SpectrumTriggerOperationNotImplemented</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot set pulse width of </span><span class="si">{</span><span class="n">trigger_source</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the pulse width (samples) needed to trigger an acquisition using an external trigger source if
SPC_TM_PW_SMALLER or SPC_TM_PW_GREATER <code>ExternalTriggerMode</code> is selected. An external trigger source must be
enabled.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>width (int):</strong>  The trigger pulse width to set, in samples.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.apply_channel_enabling" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.apply_channel_enabling">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">apply_channel_enabling</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">apply_channel_enabling</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the enabled channels chosen using set_enable_channels(). This happens automatically and does not</span>
<span class="sd">        usually need to be called.&quot;&quot;&quot;</span>
        <span class="n">enabled_channel_spectrum_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled_channels</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">enabled_channel_spectrum_values</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span>
            <span class="n">bitwise_or_of_enabled_channels</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="n">enabled_channel_spectrum_values</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CHENABLE</span><span class="p">,</span> <span class="n">bitwise_or_of_enabled_channels</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumInvalidNumberOfEnabledChannels</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot enable </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">enabled_channel_spectrum_values</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span> <span class="sa">f</span><span class="s2">&quot;channels on one card.&quot;</span>
            <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Apply the enabled channels chosen using set_enable_channels(). This happens automatically and does not
usually need to be called.</p>
</div>


                            </div>
                            <div id="SpectrumCard.acquisition_length_in_samples" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.acquisition_length_in_samples">#&nbsp;&nbsp</a>

        <span class="name">acquisition_length_in_samples</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The current recording length (per channel) in samples.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>length_in_samples (int): The current recording length ('acquisition length') in samples.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_acquisition_length_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_acquisition_length_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_acquisition_length_in_samples</span><span class="signature">(self, length_in_samples: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the recording length (per channel). In FIFO mode, it will be quantised according to the step size</span>
<span class="sd">          allowed by the connected card type.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired recording length (&#39;acquisition length&#39;), in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">length_in_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coerce_num_samples_if_fifo</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SEGMENTSIZE</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MEMSIZE</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the recording length (per channel). In FIFO mode, it will be quantised according to the step size
  allowed by the connected card type.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>length_in_samples (int):</strong>  The desired recording length ('acquisition length'), in samples.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.post_trigger_length_in_samples" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.post_trigger_length_in_samples">#&nbsp;&nbsp</a>

        <span class="name">post_trigger_length_in_samples</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The number of samples of the recording that will contain data received after the trigger event.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>length_in_samples (int): The currently set post trigger length in samples.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_post_trigger_length_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_post_trigger_length_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_post_trigger_length_in_samples</span><span class="signature">(self, length_in_samples: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_post_trigger_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the number of samples of the recording that will contain data received after the trigger event.</span>
<span class="sd">        In FIFO mode, this will be quantised according to the minimum step size allowed by the connected card.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired post trigger length in samples.&quot;&quot;&quot;</span>
        <span class="n">length_in_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coerce_num_samples_if_fifo</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span> <span class="o">==</span> <span class="n">AcquisitionMode</span><span class="o">.</span><span class="n">SPC_REC_FIFO_MULTI</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">-</span> <span class="n">length_in_samples</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;FIFO mode: coercing post trigger length to maximum allowed value (step-size samples less than &quot;</span>
                    <span class="s2">&quot;the acquisition length).&quot;</span>
                <span class="p">)</span>
                <span class="n">length_in_samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">-</span> <span class="n">get_memsize_step_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_card_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_POSTTRIGGER</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the number of samples of the recording that will contain data received after the trigger event.
In FIFO mode, this will be quantised according to the minimum step size allowed by the connected card.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>length_in_samples (int):</strong>  The desired post trigger length in samples.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.acquisition_mode" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.acquisition_mode">#&nbsp;&nbsp</a>

        <span class="name">acquisition_mode</span><span class="annotation">: <a href="spectrumdevice/settings.html#device_modes.AcquisitionMode">spectrumdevice.settings.device_modes.AcquisitionMode</a></span>
    </div>

            <div class="docstring"><p>The currently enabled card mode. Will raise an exception if the current mode is not supported by
<code><a href="">spectrumdevice</a></code>.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mode (<code>AcquisitionMode</code>): The currently enabled card acquisition mode.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_acquisition_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_acquisition_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_acquisition_mode</span><span class="signature">(
    self,
    mode: <a href="spectrumdevice/settings.html#device_modes.AcquisitionMode">spectrumdevice.settings.device_modes.AcquisitionMode</a>
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the currently enabled card mode. See `AcquisitionMode` and the Spectrum documentation</span>
<span class="sd">        for the available modes.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`AcquisitionMode`): The desired acquisition mode.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CARDMODE</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the currently enabled card mode. See <code>AcquisitionMode</code> and the Spectrum documentation
for the available modes.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>mode (<code>AcquisitionMode</code>):</strong>  The desired acquisition mode.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.timeout_in_ms" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.timeout_in_ms">#&nbsp;&nbsp</a>

        <span class="name">timeout_in_ms</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The time for which the card will wait for a trigger to tbe received after an acquisition has started
before returning an error.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>timeout_in_ms (in)t: The currently set acquisition timeout in ms.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_timeout_in_ms" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_timeout_in_ms">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_timeout_in_ms</span><span class="signature">(self, timeout_in_ms: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_timeout_in_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_in_ms</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the time for which the card will wait for a trigger to tbe received after an acquisition has started</span>
<span class="sd">        before returning an error.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout_in_ms (int): The desired acquisition timeout in ms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_TIMEOUT</span><span class="p">,</span> <span class="n">timeout_in_ms</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the time for which the card will wait for a trigger to tbe received after an acquisition has started
before returning an error.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>timeout_in_ms (int):</strong>  The desired acquisition timeout in ms.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.clock_mode" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.clock_mode">#&nbsp;&nbsp</a>

        <span class="name">clock_mode</span><span class="annotation">: <a href="spectrumdevice/settings.html#device_modes.ClockMode">spectrumdevice.settings.device_modes.ClockMode</a></span>
    </div>

            <div class="docstring"><p>The currently enabled clock mode.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mode (<code>ClockMode</code>): The currently set clock mode.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_clock_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_clock_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_clock_mode</span><span class="signature">(self, mode: <a href="spectrumdevice/settings.html#device_modes.ClockMode">spectrumdevice.settings.device_modes.ClockMode</a>) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_clock_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ClockMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the clock mode. See `ClockMode` and the Spectrum documentation for available modes.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ClockMode`): The desired clock mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_CLOCKMODE</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the clock mode. See <code>ClockMode</code> and the Spectrum documentation for available modes.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>mode (<code>ClockMode</code>):</strong>  The desired clock mode.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumCard.available_io_modes" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.available_io_modes">#&nbsp;&nbsp</a>

        <span class="name">available_io_modes</span><span class="annotation">: <a href="spectrumdevice/settings.html#io_lines.AvailableIOModes">spectrumdevice.settings.io_lines.AvailableIOModes</a></span>
    </div>

            <div class="docstring"><p>For each multipurpose IO line on the card, read the available modes. See IOLineMode and the Spectrum
Documentation for all possible available modes and their meanings.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>modes (<code>AvailableIOModes</code>): An <code>AvailableIOModes</code> dataclass containing the modes for each IO line.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.feature_list" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.feature_list">#&nbsp;&nbsp</a>

        <span class="name">feature_list</span><span class="annotation">: List[Tuple[List[<a href="spectrumdevice/settings.html#card_features.CardFeature">spectrumdevice.settings.card_features.CardFeature</a>], List[<a href="spectrumdevice/settings.html#card_features.AdvancedCardFeature">spectrumdevice.settings.card_features.AdvancedCardFeature</a>]]]</span>
    </div>

            <div class="docstring"><p>Get a list of the features of the card. See <code>CardFeature</code>, <code>AdvancedCardFeature</code> and the Spectrum
documentation for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>features (List[Tuple[List[<code>CardFeature</code>], List[<code>AdvancedCardFeature</code>]]]): A tuple of two lists - of features
      and advanced features respectively - wrapped in a list.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.sample_rate_in_hz" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumCard.sample_rate_in_hz">#&nbsp;&nbsp</a>

        <span class="name">sample_rate_in_hz</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The rate at which samples will be acquired during an acquisition, in Hz.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>rate (int): The currently set sample rate in Hz.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumCard.set_sample_rate_in_hz" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumCard.set_sample_rate_in_hz">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sample_rate_in_hz</span><span class="signature">(self, rate: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the rate at which samples will be acquired during an acquisition, in Hz.</span>
<span class="sd">        Args:</span>
<span class="sd">            rate (int): The desired sample rate in Hz.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SAMPLERATE</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">SpectrumRegisterLength</span><span class="o">.</span><span class="n">SIXTY_FOUR</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the rate at which samples will be acquired during an acquisition, in Hz.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>rate (int):</strong>  The desired sample rate in Hz.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#SpectrumDevice">SpectrumDevice</a></dt>
                                <dd id="SpectrumCard.reset" class="function"><a href="#SpectrumDevice.reset">reset</a></dd>
                <dd id="SpectrumCard.start_acquisition" class="function"><a href="#SpectrumDevice.start_acquisition">start_acquisition</a></dd>
                <dd id="SpectrumCard.stop_acquisition" class="function"><a href="#SpectrumDevice.stop_acquisition">stop_acquisition</a></dd>
                <dd id="SpectrumCard.configure_acquisition" class="function"><a href="#SpectrumDevice.configure_acquisition">configure_acquisition</a></dd>
                <dd id="SpectrumCard.configure_trigger" class="function"><a href="#SpectrumDevice.configure_trigger">configure_trigger</a></dd>
                <dd id="SpectrumCard.execute_standard_single_acquisition" class="function"><a href="#SpectrumDevice.execute_standard_single_acquisition">execute_standard_single_acquisition</a></dd>
                <dd id="SpectrumCard.execute_finite_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_finite_multi_fifo_acquisition">execute_finite_multi_fifo_acquisition</a></dd>
                <dd id="SpectrumCard.execute_continuous_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_continuous_multi_fifo_acquisition">execute_continuous_multi_fifo_acquisition</a></dd>
                <dd id="SpectrumCard.write_to_spectrum_device_register" class="function"><a href="#SpectrumDevice.write_to_spectrum_device_register">write_to_spectrum_device_register</a></dd>
                <dd id="SpectrumCard.read_spectrum_device_register" class="function"><a href="#SpectrumDevice.read_spectrum_device_register">read_spectrum_device_register</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="SpectrumStarHub">
                                <div class="attr class">
        <a class="headerlink" href="#SpectrumStarHub">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">SpectrumStarHub</span><wbr>(<span class="base"><a href="#SpectrumDevice">spectrumdevice.SpectrumDevice</a></span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SpectrumStarHub</span><span class="p">(</span><span class="n">SpectrumDevice</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Composite class of `SpectrumCards` for controlling a StarHub device, for example the Spectrum NetBox. StarHub</span>
<span class="sd">    devices are composites of more than one Spectrum card. Acquisition from the child cards of a StarHub is</span>
<span class="sd">    synchronised, aggregating the channels of all child cards. This class enables the control of a StarHub device as if</span>
<span class="sd">    it were a single Spectrum card.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">child_cards</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SpectrumCard</span><span class="p">],</span>
        <span class="n">master_card_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            device_number (int): The index of the StarHub to connect to. If only one StarHub is present, set to 0.</span>
<span class="sd">            child_cards (Sequence[`SpectrumCard`]): A list of `SpectrumCard` objects defining the child cards located</span>
<span class="sd">                within the StarHub, including their IP addresses and/or device numbers.</span>
<span class="sd">            master_card_index (int): The position within child_cards where the master card (the card which controls the</span>
<span class="sd">                clock) is located.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span> <span class="o">=</span> <span class="n">child_cards</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span> <span class="o">=</span> <span class="n">child_cards</span><span class="p">[</span><span class="n">master_card_index</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span> <span class="o">=</span> <span class="n">child_cards</span><span class="p">[</span><span class="n">master_card_index</span><span class="p">]</span>
        <span class="n">child_card_logical_indices</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sync</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="n">all_cards_binary_mask</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="n">child_card_logical_indices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SYNC_ENABLEMASK</span><span class="p">,</span> <span class="n">all_cards_binary_mask</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnects from each child card and terminates connection to the hub itself.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">:</span>
            <span class="n">destroy_handle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reconnects to the hub after a `disconnect()`, and reconnects to each child card.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">reconnect</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">STAR_HUB_STATUS_TYPE</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The statuses of each child card, in a list. See `SpectrumCard.status` for more information.</span>
<span class="sd">        Returns:</span>
<span class="sd">            statuses (List[List[`CardStatus`]]): A list of lists of `CardStatus`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">STAR_HUB_STATUS_TYPE</span><span class="p">([</span><span class="n">card</span><span class="o">.</span><span class="n">status</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">start_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the transfer of samples from the on-device buffer of each child card to its `TransferBuffer`. See</span>
<span class="sd">        `SpectrumCard.start_transfer()` for more information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">start_transfer</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">stop_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the transfer of samples from each card to its `TransferBuffer`. See `SpectrumCard.stop_transfer()` for</span>
<span class="sd">        more information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">stop_transfer</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">wait_for_transfer_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all cards to stop transferring samples to their `TransferBuffers`. See</span>
<span class="sd">        `SpectrumCard.wait_for_transfer_to_complete()` for more information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">wait_for_transfer_to_complete</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">connected</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;True if a StarHub is connected, False if not.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span>

    <span class="k">def</span> <span class="nf">set_triggering_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the index of the child_card responsible for receiving a trigger. During construction, this is set</span>
<span class="sd">        equal to the index of the master card but in some situations it may be necessary to change it.</span>

<span class="sd">        Args:</span>
<span class="sd">            card_index (int): The index of the StarHub&#39;s triggering card within the list of child cards provided on</span>
<span class="sd">                __init__().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">[</span><span class="n">card_index</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clock_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ClockMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The clock mode currently configured on the master card.</span>

<span class="sd">        Returns:</span>
<span class="sd">            mode (`ClockMode`): The currently configured clock mode.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span><span class="o">.</span><span class="n">clock_mode</span>

    <span class="k">def</span> <span class="nf">set_clock_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ClockMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the clock mode configured on the master card.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ClockMode`): The desired clock mode.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span><span class="o">.</span><span class="n">set_clock_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The sample rate configured on the master card.</span>

<span class="sd">        Returns:</span>
<span class="sd">            rate (int): The current sample rate of the master card in Hz.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span><span class="o">.</span><span class="n">sample_rate_in_hz</span>

    <span class="k">def</span> <span class="nf">set_sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the sample rate of the child cards (including the master card).</span>
<span class="sd">        Args:</span>
<span class="sd">            rate (int): The desired sample rate of the child cards in Hz.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">set_sample_rate_in_hz</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">trigger_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The trigger sources configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.trigger_sources()` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            sources (List[`TriggerSource`]): A list of the currently enabled trigger sources.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">trigger_sources</span>

    <span class="k">def</span> <span class="nf">set_trigger_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the trigger sources configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.trigger_sources()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            sources (List[`TriggerSource`]): The trigger sources to enable, in a list.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_trigger_sources</span><span class="p">(</span><span class="n">sources</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">card</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="p">:</span>
                <span class="n">card</span><span class="o">.</span><span class="n">set_trigger_sources</span><span class="p">([</span><span class="n">TriggerSource</span><span class="o">.</span><span class="n">SPC_TMASK_NONE</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExternalTriggerMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The trigger mode configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.external_trigger_mode()` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            mode (`ExternalTriggerMode`): The currently set external trigger mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">external_trigger_mode</span>

    <span class="k">def</span> <span class="nf">set_external_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ExternalTriggerMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the trigger mode configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.set_external_trigger_mode()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ExternalTriggerMode`): The desired external trigger mode.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_external_trigger_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_trigger_level_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The external trigger level configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.external_trigger_level_mv()` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            level (int): The external trigger level in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">external_trigger_level_in_mv</span>

    <span class="k">def</span> <span class="nf">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the external trigger level configured on the triggering card, which by default is the master card.</span>
<span class="sd">        See `SpectrumCard.set_external_trigger_level_mv()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            level (int): The desired external trigger level in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The trigger pulse width (samples) configured on the triggering card, which by default is the master card.</span>
<span class="sd">        See `SpectrumCard.external_trigger_pulse_width_in_samples()` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            width (int): The current trigger pulse width in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">external_trigger_pulse_width_in_samples</span>

    <span class="k">def</span> <span class="nf">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the trigger pulse width (samples) configured on the triggering card, which by default is the master</span>
<span class="sd">        card. See `SpectrumCard.set_external_trigger_pulse_width_in_samples()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (int): The desired trigger pulse width in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_channel_enabling</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the enabled channels chosen using `set_enable_channels()`. This happens automatically and does not</span>
<span class="sd">        usually need to be called.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">apply_channel_enabling</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently enabled channel indices, indexed over the whole hub (from 0 to N-1, where N is the total</span>
<span class="sd">        number of channels available to the hub).</span>

<span class="sd">        Returns:</span>
<span class="sd">            channel_nums (List[int]): The currently enabled channel indices.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">enabled_channels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n_channels_in_previous_card</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">enabled_channels</span> <span class="o">+=</span> <span class="p">[</span><span class="n">channel_num</span> <span class="o">+</span> <span class="n">n_channels_in_previous_card</span> <span class="k">for</span> <span class="n">channel_num</span> <span class="ow">in</span> <span class="n">card</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">]</span>
            <span class="n">n_channels_in_previous_card</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">enabled_channels</span>

    <span class="k">def</span> <span class="nf">set_enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels_nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the currently enabled channel indices, indexed over the whole hub (from 0 to N-1, where N is the total</span>
<span class="sd">        number of channels available to the hub).</span>

<span class="sd">        Returns:</span>
<span class="sd">            channel_nums (List[int]): The indices to enable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">channels_nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">channels_to_enable_all_cards</span> <span class="o">=</span> <span class="n">channels_nums</span>

        <span class="k">for</span> <span class="n">child_card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">n_channels_in_card</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">child_card</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span>
            <span class="n">channels_to_enable_this_card</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">arange</span><span class="p">(</span><span class="n">n_channels_in_card</span><span class="p">))</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">channels_to_enable_all_cards</span><span class="p">))</span>
            <span class="n">num_channels_to_enable_this_card</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_to_enable_this_card</span><span class="p">)</span>
            <span class="n">child_card</span><span class="o">.</span><span class="n">set_enabled_channels</span><span class="p">(</span><span class="n">channels_to_enable_this_card</span><span class="p">)</span>
            <span class="n">channels_to_enable_all_cards</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">num</span> <span class="o">-</span> <span class="n">n_channels_in_card</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">channels_nums</span><span class="p">[</span><span class="n">num_channels_to_enable_this_card</span><span class="p">:]</span>
            <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">transfer_buffers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TransferBuffer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The `TransferBuffer`s of all of the child cards of the hub. See `SpectrumCard.transfer_buffers` for more</span>
<span class="sd">        information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            buffers (List[`TransferBuffer`]): A list of the transfer buffers for each child card.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">card</span><span class="o">.</span><span class="n">transfer_buffers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">define_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardToPCDataTransferBuffer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or provide `CardToPCDataTransferBuffer` objects for receiving acquired samples from the child cards. If</span>
<span class="sd">        no buffers are provided, they will be created with the correct size and a board_memory_offset_bytes of 0. See</span>
<span class="sd">        `SpectrumCard.define_transfer_buffer()` for more information</span>

<span class="sd">        Args:</span>
<span class="sd">            buffer (Optional[`CardToPCDataTransferBuffer`]): A list containing pre-constructed</span>
<span class="sd">            `CardToPCDataTransferBuffer` objects, one for each child card. The size of the buffers should be chosen</span>
<span class="sd">            according to the current number of active channels in each card and the acquisition length.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">card</span><span class="p">,</span> <span class="n">buff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">,</span> <span class="n">buffer</span><span class="p">):</span>
                <span class="n">card</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">([</span><span class="n">buff</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
                <span class="n">card</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">wait_for_acquisition_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for each card to finish its acquisition. See `SpectrumCard.wait_for_acquisition_to_complete()` for more</span>
<span class="sd">        information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">wait_for_acquisition_to_complete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_waveforms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">float_</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of of the most recently transferred waveforms.</span>

<span class="sd">        This method gets the waveforms from each child card and joins them into a new list, ordered by channel number.</span>
<span class="sd">        See `SpectrumCard.get_waveforms()` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            waveforms (List[NDArray[float_]]): A list of 1D numpy arrays, one per enabled channel, in channel order.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">waveforms_all_cards</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">waveforms_all_cards</span> <span class="o">+=</span> <span class="n">card</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">waveforms_all_cards</span>

    <span class="k">def</span> <span class="nf">get_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get timestamp for the last acquisition&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">enable_timestamping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">enable_timestamping</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SpectrumChannel</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple containing of all the channels of the child cards of the hub. See `SpectrumCard.channels` for more</span>
<span class="sd">        information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            channels (List[`SpectrumChannel`]): A list of `SpectrumChannel` objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SpectrumChannel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">channels</span> <span class="o">+=</span> <span class="n">device</span><span class="o">.</span><span class="n">channels</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">channels</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently set recording length, which should be the same for all child cards. If different recording</span>
<span class="sd">        lengths are set, an exception is raised. See `SpectrumCard.acquisition_length_in_samples` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            length_in_samples: The currently set acquisition length in samples.&quot;&quot;&quot;</span>
        <span class="n">lengths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">lengths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_check_settings_constant_across_devices</span><span class="p">(</span><span class="n">lengths</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a new recording length for all child cards. See `SpectrumCard.set_acquisition_length_in_samples()` for</span>
<span class="sd">        more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired acquisition length in samples.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_acquisition_length_in_samples</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">post_trigger_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The number of samples recorded after a trigger is receive. This should be consistent across all child</span>
<span class="sd">        cards. If different values are found across the child cards, an exception is raised. See</span>
<span class="sd">        `SpectrumCard.post_trigger_length_in_samples` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            length_in_samples (int): The current post trigger length in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lengths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">lengths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">post_trigger_length_in_samples</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_check_settings_constant_across_devices</span><span class="p">(</span><span class="n">lengths</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_post_trigger_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a new post trigger length for all child cards. See `SpectrumCard.set_post_trigger_length_in_samples()`</span>
<span class="sd">        for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired post trigger length in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_post_trigger_length_in_samples</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AcquisitionMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The acquisition mode, which should be the same for all child cards. If it&#39;s not, an exception is raised.</span>
<span class="sd">        See `SpectrumCard.acquisition_mode` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            mode (`AcquisitionMode`): The currently enabled acquisition mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">modes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">acquisition_mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">AcquisitionMode</span><span class="p">(</span><span class="n">_check_settings_constant_across_devices</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">modes</span><span class="p">],</span> <span class="vm">__name__</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the acquisition mode for all child cards. See `SpectrumCard.set_acquisition_mode()` for more</span>
<span class="sd">        information.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`AcquisitionMode`): The desired acquisition mode.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timeout_in_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The time for which the card will wait for a trigger to tbe received after an acquisition has started</span>
<span class="sd">        before returning an error. This should be the same for all child cards. If it&#39;s not, an exception is raised.</span>

<span class="sd">        Returns:</span>
<span class="sd">            timeout_ms (int): The currently set acquisition timeout in ms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timeouts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">timeouts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">timeout_in_ms</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">_check_settings_constant_across_devices</span><span class="p">(</span><span class="n">timeouts</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_timeout_in_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_ms</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the acquisition timeout value for all child cards.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout_ms (int): The desired acquisition timeout setting in seconds.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_timeout_in_ms</span><span class="p">(</span><span class="n">timeout_ms</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">feature_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardFeature</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">AdvancedCardFeature</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of the features of the child cards. See `CardFeature`, `AdvancedCardFeature` and the Spectrum</span>
<span class="sd">        documentation for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            features (List[Tuple[List[`CardFeature`], List[`AdvancedCardFeature`]]]): A list of tuples, one per child</span>
<span class="sd">                card. Each tuple contains a list of features and a list of advanced features for that card.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">card</span><span class="o">.</span><span class="n">feature_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">available_io_modes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AvailableIOModes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For each multipurpose IO line on the master card, read the available modes. See `IOLineMode` and the Spectrum</span>
<span class="sd">        Documentation for all possible available modes and their meanings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            modes (AvailableIOModes): An `AvailableIOModes` dataclass containing the modes available for each IO line.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span><span class="o">.</span><span class="n">available_io_modes</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;StarHub </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

        </details>

            <div class="docstring"><p>Composite class of <code>SpectrumCards</code> for controlling a StarHub device, for example the Spectrum NetBox. StarHub
devices are composites of more than one Spectrum card. Acquisition from the child cards of a StarHub is
synchronised, aggregating the channels of all child cards. This class enables the control of a StarHub device as if
it were a single Spectrum card.</p>
</div>


                            <div id="SpectrumStarHub.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">SpectrumStarHub</span><span class="signature">(
    device_number: int,
    child_cards: Sequence[<a href="#devices.spectrum_card.SpectrumCard">spectrumdevice.devices.spectrum_card.SpectrumCard</a>],
    master_card_index: int
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">child_cards</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SpectrumCard</span><span class="p">],</span>
        <span class="n">master_card_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            device_number (int): The index of the StarHub to connect to. If only one StarHub is present, set to 0.</span>
<span class="sd">            child_cards (Sequence[`SpectrumCard`]): A list of `SpectrumCard` objects defining the child cards located</span>
<span class="sd">                within the StarHub, including their IP addresses and/or device numbers.</span>
<span class="sd">            master_card_index (int): The position within child_cards where the master card (the card which controls the</span>
<span class="sd">                clock) is located.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span> <span class="o">=</span> <span class="n">child_cards</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span> <span class="o">=</span> <span class="n">child_cards</span><span class="p">[</span><span class="n">master_card_index</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span> <span class="o">=</span> <span class="n">child_cards</span><span class="p">[</span><span class="n">master_card_index</span><span class="p">]</span>
        <span class="n">child_card_logical_indices</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;sync</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="n">all_cards_binary_mask</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">or_</span><span class="p">,</span> <span class="n">child_card_logical_indices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_SYNC_ENABLEMASK</span><span class="p">,</span> <span class="n">all_cards_binary_mask</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>
</pre></div>

        </details>

            <div class="docstring"><h6 id="args">Args</h6>

<ul>
<li><strong>device_number (int):</strong>  The index of the StarHub to connect to. If only one StarHub is present, set to 0.</li>
<li><strong>child_cards (Sequence[<code><a href="#SpectrumCard">SpectrumCard</a></code>]):</strong>  A list of <code><a href="#SpectrumCard">SpectrumCard</a></code> objects defining the child cards located
within the StarHub, including their IP addresses and/or device numbers.</li>
<li><strong>master_card_index (int):</strong>  The position within child_cards where the master card (the card which controls the
clock) is located.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.disconnect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.disconnect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">disconnect</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnects from each child card and terminates connection to the hub itself.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span><span class="p">:</span>
            <span class="n">destroy_handle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connected</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>

        </details>

            <div class="docstring"><p>Disconnects from each child card and terminates connection to the hub itself.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.reconnect" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.reconnect">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">reconnect</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">reconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reconnects to the hub after a `disconnect()`, and reconnects to each child card.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">reconnect</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Reconnects to the hub after a <code><a href="#SpectrumStarHub.disconnect">disconnect()</a></code>, and reconnects to each child card.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.status" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.status">#&nbsp;&nbsp</a>

        <span class="name">status</span><span class="annotation">: List[List[<a href="spectrumdevice/settings.html#status.StatusCode">spectrumdevice.settings.status.StatusCode</a>]]</span>
    </div>

            <div class="docstring"><p>The statuses of each child card, in a list. See <code><a href="#SpectrumCard.status">SpectrumCard.status</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>statuses (List[List[<code>CardStatus</code>]]): A list of lists of <code>CardStatus</code>.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.start_transfer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.start_transfer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">start_transfer</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">start_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the transfer of samples from the on-device buffer of each child card to its `TransferBuffer`. See</span>
<span class="sd">        `SpectrumCard.start_transfer()` for more information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">start_transfer</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Start the transfer of samples from the on-device buffer of each child card to its <code>TransferBuffer</code>. See
<code><a href="#SpectrumCard.start_transfer">SpectrumCard.start_transfer()</a></code> for more information.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.stop_transfer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.stop_transfer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_transfer</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stop_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop the transfer of samples from each card to its `TransferBuffer`. See `SpectrumCard.stop_transfer()` for</span>
<span class="sd">        more information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">stop_transfer</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Stop the transfer of samples from each card to its <code>TransferBuffer</code>. See <code><a href="#SpectrumCard.stop_transfer">SpectrumCard.stop_transfer()</a></code> for
more information.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.wait_for_transfer_to_complete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.wait_for_transfer_to_complete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">wait_for_transfer_to_complete</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">wait_for_transfer_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for all cards to stop transferring samples to their `TransferBuffers`. See</span>
<span class="sd">        `SpectrumCard.wait_for_transfer_to_complete()` for more information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">wait_for_transfer_to_complete</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Wait for all cards to stop transferring samples to their <code>TransferBuffers</code>. See
<code><a href="#SpectrumCard.wait_for_transfer_to_complete">SpectrumCard.wait_for_transfer_to_complete()</a></code> for more information.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.connected" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.connected">#&nbsp;&nbsp</a>

        <span class="name">connected</span><span class="annotation">: bool</span>
    </div>

            <div class="docstring"><p>True if a StarHub is connected, False if not.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_triggering_card" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_triggering_card">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_triggering_card</span><span class="signature">(self, card_index: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_triggering_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">card_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the index of the child_card responsible for receiving a trigger. During construction, this is set</span>
<span class="sd">        equal to the index of the master card but in some situations it may be necessary to change it.</span>

<span class="sd">        Args:</span>
<span class="sd">            card_index (int): The index of the StarHub&#39;s triggering card within the list of child cards provided on</span>
<span class="sd">                __init__().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">[</span><span class="n">card_index</span><span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the index of the child_card responsible for receiving a trigger. During construction, this is set
equal to the index of the master card but in some situations it may be necessary to change it.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>card_index (int):</strong>  The index of the StarHub's triggering card within the list of child cards provided on
__init__().</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.clock_mode" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.clock_mode">#&nbsp;&nbsp</a>

        <span class="name">clock_mode</span><span class="annotation">: <a href="spectrumdevice/settings.html#device_modes.ClockMode">spectrumdevice.settings.device_modes.ClockMode</a></span>
    </div>

            <div class="docstring"><p>The clock mode currently configured on the master card.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mode (<code>ClockMode</code>): The currently configured clock mode.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_clock_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_clock_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_clock_mode</span><span class="signature">(self, mode: <a href="spectrumdevice/settings.html#device_modes.ClockMode">spectrumdevice.settings.device_modes.ClockMode</a>) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_clock_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ClockMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the clock mode configured on the master card.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ClockMode`): The desired clock mode.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master_card</span><span class="o">.</span><span class="n">set_clock_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the clock mode configured on the master card.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>mode (<code>ClockMode</code>):</strong>  The desired clock mode.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.sample_rate_in_hz" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.sample_rate_in_hz">#&nbsp;&nbsp</a>

        <span class="name">sample_rate_in_hz</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The sample rate configured on the master card.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>rate (int): The current sample rate of the master card in Hz.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_sample_rate_in_hz" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_sample_rate_in_hz">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sample_rate_in_hz</span><span class="signature">(self, rate: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the sample rate of the child cards (including the master card).</span>
<span class="sd">        Args:</span>
<span class="sd">            rate (int): The desired sample rate of the child cards in Hz.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">set_sample_rate_in_hz</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the sample rate of the child cards (including the master card).</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>rate (int):</strong>  The desired sample rate of the child cards in Hz.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.trigger_sources" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.trigger_sources">#&nbsp;&nbsp</a>

        <span class="name">trigger_sources</span><span class="annotation">: List[<a href="spectrumdevice/settings.html#triggering.TriggerSource">spectrumdevice.settings.triggering.TriggerSource</a>]</span>
    </div>

            <div class="docstring"><p>The trigger sources configured on the triggering card, which by default is the master card. See
<code><a href="#SpectrumCard.trigger_sources">SpectrumCard.trigger_sources()</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>sources (List[<code>TriggerSource</code>]): A list of the currently enabled trigger sources.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_trigger_sources" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_trigger_sources">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_trigger_sources</span><span class="signature">(
    self,
    sources: List[<a href="spectrumdevice/settings.html#triggering.TriggerSource">spectrumdevice.settings.triggering.TriggerSource</a>]
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_trigger_sources</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the trigger sources configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.trigger_sources()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            sources (List[`TriggerSource`]): The trigger sources to enable, in a list.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_trigger_sources</span><span class="p">(</span><span class="n">sources</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">card</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="p">:</span>
                <span class="n">card</span><span class="o">.</span><span class="n">set_trigger_sources</span><span class="p">([</span><span class="n">TriggerSource</span><span class="o">.</span><span class="n">SPC_TMASK_NONE</span><span class="p">])</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the trigger sources configured on the triggering card, which by default is the master card. See
<code><a href="#SpectrumCard.trigger_sources">SpectrumCard.trigger_sources()</a></code> for more information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>sources (List[<code>TriggerSource</code>]):</strong>  The trigger sources to enable, in a list.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.external_trigger_mode" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.external_trigger_mode">#&nbsp;&nbsp</a>

        <span class="name">external_trigger_mode</span><span class="annotation">: <a href="spectrumdevice/settings.html#triggering.ExternalTriggerMode">spectrumdevice.settings.triggering.ExternalTriggerMode</a></span>
    </div>

            <div class="docstring"><p>The trigger mode configured on the triggering card, which by default is the master card. See
<code><a href="#SpectrumCard.external_trigger_mode">SpectrumCard.external_trigger_mode()</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mode (<code>ExternalTriggerMode</code>): The currently set external trigger mode.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_external_trigger_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_external_trigger_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_external_trigger_mode</span><span class="signature">(
    self,
    mode: <a href="spectrumdevice/settings.html#triggering.ExternalTriggerMode">spectrumdevice.settings.triggering.ExternalTriggerMode</a>
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_external_trigger_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">ExternalTriggerMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the trigger mode configured on the triggering card, which by default is the master card. See</span>
<span class="sd">        `SpectrumCard.set_external_trigger_mode()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`ExternalTriggerMode`): The desired external trigger mode.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_external_trigger_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the trigger mode configured on the triggering card, which by default is the master card. See
<code><a href="#SpectrumCard.set_external_trigger_mode">SpectrumCard.set_external_trigger_mode()</a></code> for more information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>mode (<code>ExternalTriggerMode</code>):</strong>  The desired external trigger mode.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.external_trigger_level_in_mv" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.external_trigger_level_in_mv">#&nbsp;&nbsp</a>

        <span class="name">external_trigger_level_in_mv</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The external trigger level configured on the triggering card, which by default is the master card. See
<code>SpectrumCard.external_trigger_level_mv()</code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>level (int): The external trigger level in mV.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_external_trigger_level_in_mv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_external_trigger_level_in_mv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_external_trigger_level_in_mv</span><span class="signature">(self, level: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the external trigger level configured on the triggering card, which by default is the master card.</span>
<span class="sd">        See `SpectrumCard.set_external_trigger_level_mv()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            level (int): The desired external trigger level in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_external_trigger_level_in_mv</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the external trigger level configured on the triggering card, which by default is the master card.
See <code>SpectrumCard.set_external_trigger_level_mv()</code> for more information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>level (int):</strong>  The desired external trigger level in mV.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.external_trigger_pulse_width_in_samples" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.external_trigger_pulse_width_in_samples">#&nbsp;&nbsp</a>

        <span class="name">external_trigger_pulse_width_in_samples</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The trigger pulse width (samples) configured on the triggering card, which by default is the master card.
See <code><a href="#SpectrumCard.external_trigger_pulse_width_in_samples">SpectrumCard.external_trigger_pulse_width_in_samples()</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>width (int): The current trigger pulse width in samples.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_external_trigger_pulse_width_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_external_trigger_pulse_width_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_external_trigger_pulse_width_in_samples</span><span class="signature">(self, width: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the trigger pulse width (samples) configured on the triggering card, which by default is the master</span>
<span class="sd">        card. See `SpectrumCard.set_external_trigger_pulse_width_in_samples()` for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (int): The desired trigger pulse width in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">set_external_trigger_pulse_width_in_samples</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the trigger pulse width (samples) configured on the triggering card, which by default is the master
card. See <code><a href="#SpectrumCard.set_external_trigger_pulse_width_in_samples">SpectrumCard.set_external_trigger_pulse_width_in_samples()</a></code> for more information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>width (int):</strong>  The desired trigger pulse width in samples.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.apply_channel_enabling" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.apply_channel_enabling">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">apply_channel_enabling</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">apply_channel_enabling</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the enabled channels chosen using `set_enable_channels()`. This happens automatically and does not</span>
<span class="sd">        usually need to be called.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">apply_channel_enabling</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Apply the enabled channels chosen using <code>set_enable_channels()</code>. This happens automatically and does not
usually need to be called.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.enabled_channels" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.enabled_channels">#&nbsp;&nbsp</a>

        <span class="name">enabled_channels</span><span class="annotation">: List[int]</span>
    </div>

            <div class="docstring"><p>The currently enabled channel indices, indexed over the whole hub (from 0 to N-1, where N is the total
number of channels available to the hub).</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>channel_nums (List[int]): The currently enabled channel indices.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_enabled_channels" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_enabled_channels">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_enabled_channels</span><span class="signature">(self, channels_nums: List[int]) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels_nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the currently enabled channel indices, indexed over the whole hub (from 0 to N-1, where N is the total</span>
<span class="sd">        number of channels available to the hub).</span>

<span class="sd">        Returns:</span>
<span class="sd">            channel_nums (List[int]): The indices to enable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">channels_nums</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">channels_to_enable_all_cards</span> <span class="o">=</span> <span class="n">channels_nums</span>

        <span class="k">for</span> <span class="n">child_card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">n_channels_in_card</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">child_card</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span>
            <span class="n">channels_to_enable_this_card</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">arange</span><span class="p">(</span><span class="n">n_channels_in_card</span><span class="p">))</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">channels_to_enable_all_cards</span><span class="p">))</span>
            <span class="n">num_channels_to_enable_this_card</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_to_enable_this_card</span><span class="p">)</span>
            <span class="n">child_card</span><span class="o">.</span><span class="n">set_enabled_channels</span><span class="p">(</span><span class="n">channels_to_enable_this_card</span><span class="p">)</span>
            <span class="n">channels_to_enable_all_cards</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">num</span> <span class="o">-</span> <span class="n">n_channels_in_card</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">channels_nums</span><span class="p">[</span><span class="n">num_channels_to_enable_this_card</span><span class="p">:]</span>
            <span class="p">]</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the currently enabled channel indices, indexed over the whole hub (from 0 to N-1, where N is the total
number of channels available to the hub).</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>channel_nums (List[int]): The indices to enable.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.transfer_buffers" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.transfer_buffers">#&nbsp;&nbsp</a>

        <span class="name">transfer_buffers</span><span class="annotation">: List[<a href="spectrumdevice/settings.html#transfer_buffer.TransferBuffer">spectrumdevice.settings.transfer_buffer.TransferBuffer</a>]</span>
    </div>

            <div class="docstring"><p>The <code>TransferBuffer</code>s of all of the child cards of the hub. See <code><a href="#SpectrumCard.transfer_buffers">SpectrumCard.transfer_buffers</a></code> for more
information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>buffers (List[<code>TransferBuffer</code>]): A list of the transfer buffers for each child card.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.define_transfer_buffer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.define_transfer_buffer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">define_transfer_buffer</span><span class="signature">(
    self,
    buffer: Optional[List[<a href="spectrumdevice/settings.html#transfer_buffer.CardToPCDataTransferBuffer">spectrumdevice.settings.transfer_buffer.CardToPCDataTransferBuffer</a>]] = None
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">define_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardToPCDataTransferBuffer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or provide `CardToPCDataTransferBuffer` objects for receiving acquired samples from the child cards. If</span>
<span class="sd">        no buffers are provided, they will be created with the correct size and a board_memory_offset_bytes of 0. See</span>
<span class="sd">        `SpectrumCard.define_transfer_buffer()` for more information</span>

<span class="sd">        Args:</span>
<span class="sd">            buffer (Optional[`CardToPCDataTransferBuffer`]): A list containing pre-constructed</span>
<span class="sd">            `CardToPCDataTransferBuffer` objects, one for each child card. The size of the buffers should be chosen</span>
<span class="sd">            according to the current number of active channels in each card and the acquisition length.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">card</span><span class="p">,</span> <span class="n">buff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">,</span> <span class="n">buffer</span><span class="p">):</span>
                <span class="n">card</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">([</span><span class="n">buff</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
                <span class="n">card</span><span class="o">.</span><span class="n">define_transfer_buffer</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create or provide <code>CardToPCDataTransferBuffer</code> objects for receiving acquired samples from the child cards. If
no buffers are provided, they will be created with the correct size and a board_memory_offset_bytes of 0. See
<code><a href="#SpectrumCard.define_transfer_buffer">SpectrumCard.define_transfer_buffer()</a></code> for more information</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>buffer (Optional[<code>CardToPCDataTransferBuffer</code>]):</strong>  A list containing pre-constructed</li>
<li><code>CardToPCDataTransferBuffer</code> objects, one for each child card. The size of the buffers should be chosen</li>
<li>according to the current number of active channels in each card and the acquisition length.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.wait_for_acquisition_to_complete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.wait_for_acquisition_to_complete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">wait_for_acquisition_to_complete</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">wait_for_acquisition_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for each card to finish its acquisition. See `SpectrumCard.wait_for_acquisition_to_complete()` for more</span>
<span class="sd">        information.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">wait_for_acquisition_to_complete</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Wait for each card to finish its acquisition. See <code><a href="#SpectrumCard.wait_for_acquisition_to_complete">SpectrumCard.wait_for_acquisition_to_complete()</a></code> for more
information.</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.get_waveforms" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.get_waveforms">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_waveforms</span><span class="signature">(self) -&gt; List[numpy.ndarray[Any, numpy.dtype[numpy.float64]]]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_waveforms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">float_</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of of the most recently transferred waveforms.</span>

<span class="sd">        This method gets the waveforms from each child card and joins them into a new list, ordered by channel number.</span>
<span class="sd">        See `SpectrumCard.get_waveforms()` for more information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            waveforms (List[NDArray[float_]]): A list of 1D numpy arrays, one per enabled channel, in channel order.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">waveforms_all_cards</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">waveforms_all_cards</span> <span class="o">+=</span> <span class="n">card</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">waveforms_all_cards</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get a list of of the most recently transferred waveforms.</p>

<p>This method gets the waveforms from each child card and joins them into a new list, ordered by channel number.
See <code><a href="#SpectrumCard.get_waveforms">SpectrumCard.get_waveforms()</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>waveforms (List[NDArray[float_]]): A list of 1D numpy arrays, one per enabled channel, in channel order.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.get_timestamp" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.get_timestamp">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">get_timestamp</span><span class="signature">(self) -&gt; Optional[datetime.datetime]</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">get_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get timestamp for the last acquisition&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Get timestamp for the last acquisition</p>
</div>


                            </div>
                            <div id="SpectrumStarHub.enable_timestamping" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.enable_timestamping">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">enable_timestamping</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">enable_timestamping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_triggering_card</span><span class="o">.</span><span class="n">enable_timestamping</span><span class="p">()</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="SpectrumStarHub.channels" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.channels">#&nbsp;&nbsp</a>

        <span class="name">channels</span><span class="annotation">: Sequence[<a href="#devices.spectrum_channel.SpectrumChannel">spectrumdevice.devices.spectrum_channel.SpectrumChannel</a>]</span>
    </div>

            <div class="docstring"><p>A tuple containing of all the channels of the child cards of the hub. See <code><a href="#SpectrumCard.channels">SpectrumCard.channels</a></code> for more
information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>channels (List[<code><a href="#SpectrumChannel">SpectrumChannel</a></code>]): A list of <code><a href="#SpectrumChannel">SpectrumChannel</a></code> objects.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.acquisition_length_in_samples" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.acquisition_length_in_samples">#&nbsp;&nbsp</a>

        <span class="name">acquisition_length_in_samples</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The currently set recording length, which should be the same for all child cards. If different recording
lengths are set, an exception is raised. See <code><a href="#SpectrumCard.acquisition_length_in_samples">SpectrumCard.acquisition_length_in_samples</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>length_in_samples: The currently set acquisition length in samples.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_acquisition_length_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_acquisition_length_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_acquisition_length_in_samples</span><span class="signature">(self, length_in_samples: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a new recording length for all child cards. See `SpectrumCard.set_acquisition_length_in_samples()` for</span>
<span class="sd">        more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired acquisition length in samples.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_acquisition_length_in_samples</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set a new recording length for all child cards. See <code><a href="#SpectrumCard.set_acquisition_length_in_samples">SpectrumCard.set_acquisition_length_in_samples()</a></code> for
more information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>length_in_samples (int):</strong>  The desired acquisition length in samples.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.post_trigger_length_in_samples" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.post_trigger_length_in_samples">#&nbsp;&nbsp</a>

        <span class="name">post_trigger_length_in_samples</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The number of samples recorded after a trigger is receive. This should be consistent across all child
cards. If different values are found across the child cards, an exception is raised. See
<code><a href="#SpectrumCard.post_trigger_length_in_samples">SpectrumCard.post_trigger_length_in_samples</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>length_in_samples (int): The current post trigger length in samples.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_post_trigger_length_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_post_trigger_length_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_post_trigger_length_in_samples</span><span class="signature">(self, length_in_samples: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_post_trigger_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a new post trigger length for all child cards. See `SpectrumCard.set_post_trigger_length_in_samples()`</span>
<span class="sd">        for more information.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): The desired post trigger length in samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_post_trigger_length_in_samples</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set a new post trigger length for all child cards. See <code><a href="#SpectrumCard.set_post_trigger_length_in_samples">SpectrumCard.set_post_trigger_length_in_samples()</a></code>
for more information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>length_in_samples (int):</strong>  The desired post trigger length in samples.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.acquisition_mode" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.acquisition_mode">#&nbsp;&nbsp</a>

        <span class="name">acquisition_mode</span><span class="annotation">: <a href="spectrumdevice/settings.html#device_modes.AcquisitionMode">spectrumdevice.settings.device_modes.AcquisitionMode</a></span>
    </div>

            <div class="docstring"><p>The acquisition mode, which should be the same for all child cards. If it's not, an exception is raised.
See <code><a href="#SpectrumCard.acquisition_mode">SpectrumCard.acquisition_mode</a></code> for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>mode (<code>AcquisitionMode</code>): The currently enabled acquisition mode.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_acquisition_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_acquisition_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_acquisition_mode</span><span class="signature">(
    self,
    mode: <a href="spectrumdevice/settings.html#device_modes.AcquisitionMode">spectrumdevice.settings.device_modes.AcquisitionMode</a>
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the acquisition mode for all child cards. See `SpectrumCard.set_acquisition_mode()` for more</span>
<span class="sd">        information.</span>

<span class="sd">        Args:</span>
<span class="sd">            mode (`AcquisitionMode`): The desired acquisition mode.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the acquisition mode for all child cards. See <code><a href="#SpectrumCard.set_acquisition_mode">SpectrumCard.set_acquisition_mode()</a></code> for more
information.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>mode (<code>AcquisitionMode</code>):</strong>  The desired acquisition mode.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.timeout_in_ms" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.timeout_in_ms">#&nbsp;&nbsp</a>

        <span class="name">timeout_in_ms</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The time for which the card will wait for a trigger to tbe received after an acquisition has started
before returning an error. This should be the same for all child cards. If it's not, an exception is raised.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>timeout_ms (int): The currently set acquisition timeout in ms.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.set_timeout_in_ms" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumStarHub.set_timeout_in_ms">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_timeout_in_ms</span><span class="signature">(self, timeout_ms: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_timeout_in_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_ms</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the acquisition timeout value for all child cards.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout_ms (int): The desired acquisition timeout setting in seconds.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">set_timeout_in_ms</span><span class="p">(</span><span class="n">timeout_ms</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Change the acquisition timeout value for all child cards.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>timeout_ms (int):</strong>  The desired acquisition timeout setting in seconds.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumStarHub.feature_list" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.feature_list">#&nbsp;&nbsp</a>

        <span class="name">feature_list</span><span class="annotation">: List[Tuple[List[<a href="spectrumdevice/settings.html#card_features.CardFeature">spectrumdevice.settings.card_features.CardFeature</a>], List[<a href="spectrumdevice/settings.html#card_features.AdvancedCardFeature">spectrumdevice.settings.card_features.AdvancedCardFeature</a>]]]</span>
    </div>

            <div class="docstring"><p>Get a list of the features of the child cards. See <code>CardFeature</code>, <code>AdvancedCardFeature</code> and the Spectrum
documentation for more information.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>features (List[Tuple[List[<code>CardFeature</code>], List[<code>AdvancedCardFeature</code>]]]): A list of tuples, one per child
      card. Each tuple contains a list of features and a list of advanced features for that card.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumStarHub.available_io_modes" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumStarHub.available_io_modes">#&nbsp;&nbsp</a>

        <span class="name">available_io_modes</span><span class="annotation">: <a href="spectrumdevice/settings.html#io_lines.AvailableIOModes">spectrumdevice.settings.io_lines.AvailableIOModes</a></span>
    </div>

            <div class="docstring"><p>For each multipurpose IO line on the master card, read the available modes. See <code>IOLineMode</code> and the Spectrum
Documentation for all possible available modes and their meanings.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>modes (AvailableIOModes): An <code>AvailableIOModes</code> dataclass containing the modes available for each IO line.</p>
</blockquote>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#SpectrumDevice">SpectrumDevice</a></dt>
                                <dd id="SpectrumStarHub.reset" class="function"><a href="#SpectrumDevice.reset">reset</a></dd>
                <dd id="SpectrumStarHub.start_acquisition" class="function"><a href="#SpectrumDevice.start_acquisition">start_acquisition</a></dd>
                <dd id="SpectrumStarHub.stop_acquisition" class="function"><a href="#SpectrumDevice.stop_acquisition">stop_acquisition</a></dd>
                <dd id="SpectrumStarHub.configure_acquisition" class="function"><a href="#SpectrumDevice.configure_acquisition">configure_acquisition</a></dd>
                <dd id="SpectrumStarHub.configure_trigger" class="function"><a href="#SpectrumDevice.configure_trigger">configure_trigger</a></dd>
                <dd id="SpectrumStarHub.execute_standard_single_acquisition" class="function"><a href="#SpectrumDevice.execute_standard_single_acquisition">execute_standard_single_acquisition</a></dd>
                <dd id="SpectrumStarHub.execute_finite_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_finite_multi_fifo_acquisition">execute_finite_multi_fifo_acquisition</a></dd>
                <dd id="SpectrumStarHub.execute_continuous_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_continuous_multi_fifo_acquisition">execute_continuous_multi_fifo_acquisition</a></dd>
                <dd id="SpectrumStarHub.write_to_spectrum_device_register" class="function"><a href="#SpectrumDevice.write_to_spectrum_device_register">write_to_spectrum_device_register</a></dd>
                <dd id="SpectrumStarHub.read_spectrum_device_register" class="function"><a href="#SpectrumDevice.read_spectrum_device_register">read_spectrum_device_register</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="SpectrumChannel">
                                <div class="attr class">
        <a class="headerlink" href="#SpectrumChannel">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">SpectrumChannel</span><wbr>(<span class="base">spectrumdevice.devices.spectrum_interface.SpectrumChannelInterface</span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SpectrumChannel</span><span class="p">(</span><span class="n">SpectrumChannelInterface</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for controlling an individual channel of a spectrum digitiser. Channels are constructed automatically when</span>
<span class="sd">    a SpectrumDevice is instantiated, and accessed via the `SpectrumDevice.channels` property.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">parent_device</span><span class="p">:</span> <span class="n">SpectrumDeviceInterface</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">SpectrumChannelName</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;CHANNEL</span><span class="si">{</span><span class="n">channel_number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span> <span class="o">=</span> <span class="n">parent_device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_full_scale_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MIINST_MAXADCVALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_range_in_mv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_offset_in_percent</span>

    <span class="k">def</span> <span class="nf">convert_raw_waveform_to_voltage_waveform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_waveform</span><span class="p">:</span> <span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
        <span class="n">vertical_offset_mv</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span><span class="p">)</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span><span class="p">)</span>
        <span class="k">return</span> <span class="mf">1e-3</span> <span class="o">*</span> <span class="p">(</span>
            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span><span class="p">)</span> <span class="o">*</span> <span class="n">raw_waveform</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_full_scale_value</span><span class="p">)</span> <span class="o">+</span> <span class="n">vertical_offset_mv</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SpectrumChannelName</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The identifier assigned by the spectrum driver, formatted as an Enum by the settings package.</span>

<span class="sd">        Returns:</span>
<span class="sd">            name (`SpectrumChannelName`): The name of the channel, as assigned by the driver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_number</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;CHANNEL&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vertical_range_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently set input range of the channel in mV.</span>

<span class="sd">        Returns:</span>
<span class="sd">            vertical_range (int): The currently set vertical range in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span>
            <span class="n">VERTICAL_RANGE_COMMANDS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span>

    <span class="k">def</span> <span class="nf">set_vertical_range_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertical_range</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the input range of the channel in mV. See Spectrum documentation for valid values.</span>

<span class="sd">        Args:</span>
<span class="sd">            vertical_range (int): The desired vertical range in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">VERTICAL_RANGE_COMMANDS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">],</span> <span class="n">vertical_range</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span> <span class="o">=</span> <span class="n">vertical_range</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vertical_offset_in_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The currently set input offset of the channel in percent of the vertical range.</span>

<span class="sd">        Returns:</span>
<span class="sd">            offset (int): The currently set vertical offset in percent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span>
            <span class="n">VERTICAL_OFFSET_COMMANDS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span>

    <span class="k">def</span> <span class="nf">set_vertical_offset_in_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the input offset of the channel in percent of the vertical range. See spectrum documentation for valid</span>
<span class="sd">        values.</span>

<span class="sd">        Args:</span>
<span class="sd">            offset (int): The desired vertical offset in percent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">VERTICAL_OFFSET_COMMANDS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">],</span> <span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span> <span class="o">=</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SpectrumChannel</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_parent_device</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Class for controlling an individual channel of a spectrum digitiser. Channels are constructed automatically when
a SpectrumDevice is instantiated, and accessed via the <code><a href="#SpectrumDevice.channels">SpectrumDevice.channels</a></code> property.</p>
</div>


                            <div id="SpectrumChannel.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumChannel.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">SpectrumChannel</span><span class="signature">(
    channel_number: int,
    parent_device: <a href="#devices.spectrum_interface.SpectrumDeviceInterface">spectrumdevice.devices.spectrum_interface.SpectrumDeviceInterface</a>
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">parent_device</span><span class="p">:</span> <span class="n">SpectrumDeviceInterface</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">SpectrumChannelName</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;CHANNEL</span><span class="si">{</span><span class="n">channel_number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span> <span class="o">=</span> <span class="n">parent_device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_full_scale_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">read_spectrum_device_register</span><span class="p">(</span><span class="n">SPC_MIINST_MAXADCVALUE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_range_in_mv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_offset_in_percent</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="SpectrumChannel.convert_raw_waveform_to_voltage_waveform" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumChannel.convert_raw_waveform_to_voltage_waveform">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">convert_raw_waveform_to_voltage_waveform</span><span class="signature">(self, raw_waveform: numpy.ndarray) -&gt; numpy.ndarray</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">convert_raw_waveform_to_voltage_waveform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_waveform</span><span class="p">:</span> <span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
        <span class="n">vertical_offset_mv</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span><span class="p">)</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span><span class="p">)</span>
        <span class="k">return</span> <span class="mf">1e-3</span> <span class="o">*</span> <span class="p">(</span>
            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span><span class="p">)</span> <span class="o">*</span> <span class="n">raw_waveform</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_full_scale_value</span><span class="p">)</span> <span class="o">+</span> <span class="n">vertical_offset_mv</span>
        <span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="SpectrumChannel.name" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumChannel.name">#&nbsp;&nbsp</a>

        <span class="name">name</span><span class="annotation">: <a href="spectrumdevice/settings.html#channel.SpectrumChannelName">spectrumdevice.settings.channel.SpectrumChannelName</a></span>
    </div>

            <div class="docstring"><p>The identifier assigned by the spectrum driver, formatted as an Enum by the settings package.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>name (<code>SpectrumChannelName</code>): The name of the channel, as assigned by the driver.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumChannel.vertical_range_in_mv" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumChannel.vertical_range_in_mv">#&nbsp;&nbsp</a>

        <span class="name">vertical_range_in_mv</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The currently set input range of the channel in mV.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>vertical_range (int): The currently set vertical range in mV.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumChannel.set_vertical_range_in_mv" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumChannel.set_vertical_range_in_mv">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_vertical_range_in_mv</span><span class="signature">(self, vertical_range: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_vertical_range_in_mv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertical_range</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the input range of the channel in mV. See Spectrum documentation for valid values.</span>

<span class="sd">        Args:</span>
<span class="sd">            vertical_range (int): The desired vertical range in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">VERTICAL_RANGE_COMMANDS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">],</span> <span class="n">vertical_range</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_range_mv</span> <span class="o">=</span> <span class="n">vertical_range</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the input range of the channel in mV. See Spectrum documentation for valid values.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>vertical_range (int):</strong>  The desired vertical range in mV.</li>
</ul>
</div>


                            </div>
                            <div id="SpectrumChannel.vertical_offset_in_percent" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#SpectrumChannel.vertical_offset_in_percent">#&nbsp;&nbsp</a>

        <span class="name">vertical_offset_in_percent</span><span class="annotation">: int</span>
    </div>

            <div class="docstring"><p>The currently set input offset of the channel in percent of the vertical range.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>offset (int): The currently set vertical offset in percent.</p>
</blockquote>
</div>


                            </div>
                            <div id="SpectrumChannel.set_vertical_offset_in_percent" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#SpectrumChannel.set_vertical_offset_in_percent">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_vertical_offset_in_percent</span><span class="signature">(self, offset: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_vertical_offset_in_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the input offset of the channel in percent of the vertical range. See spectrum documentation for valid</span>
<span class="sd">        values.</span>

<span class="sd">        Args:</span>
<span class="sd">            offset (int): The desired vertical offset in percent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent_device</span><span class="o">.</span><span class="n">write_to_spectrum_device_register</span><span class="p">(</span><span class="n">VERTICAL_OFFSET_COMMANDS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_number</span><span class="p">],</span> <span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_offset_in_percent</span> <span class="o">=</span> <span class="n">offset</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the input offset of the channel in percent of the vertical range. See spectrum documentation for valid
values.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>offset (int):</strong>  The desired vertical offset in percent.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="MockSpectrumCard">
                                <div class="attr class">
        <a class="headerlink" href="#MockSpectrumCard">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">MockSpectrumCard</span><wbr>(<span class="base"><a href="#SpectrumCard">spectrumdevice.SpectrumCard</a></span>, <span class="base">spectrumdevice.devices.mocks.MockSpectrumDevice</span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MockSpectrumCard</span><span class="p">(</span><span class="n">SpectrumCard</span><span class="p">,</span> <span class="n">MockSpectrumDevice</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mock spectrum card, for testing software written to use the `SpectrumCard` class.</span>

<span class="sd">    This class overrides methods of `SpectrumCard` that communicate with hardware with mocked implementations, allowing</span>
<span class="sd">    software to be tested without Spectrum hardware connected or drivers installed, e.g. during CI. It overrides</span>
<span class="sd">    methods to use to set up a mock &#39;on device buffer&#39; attribute into which a mock waveform source will write</span>
<span class="sd">    samples. It also uses a MockTimestamper to generated timestamps for mock waveforms.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">card_type</span><span class="p">:</span> <span class="n">CardType</span><span class="p">,</span>
        <span class="n">mock_source_frame_rate_hz</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">num_modules</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">num_channels_per_module</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            device_number (int): The index of the mock device to create. Used to create a name for the device which is</span>
<span class="sd">                used internally.</span>
<span class="sd">            card_type (CardType): The model of card to mock. Affects the allowed acquisition and post-trigger lengths.</span>
<span class="sd">            mock_source_frame_rate_hz (float): Rate at which waveforms will be generated by the mock source providing</span>
<span class="sd">                data to the mock spectrum card.</span>
<span class="sd">            num_modules (int): The number of internal modules to assign the mock card. Default 2. On real hardware, this</span>
<span class="sd">                is read from the device so does not need to be set. See the Spectrum documentation to work out how many</span>
<span class="sd">                modules your hardware has.</span>
<span class="sd">            num_channels_per_module (int): The number of channels per module. Default 4 (so 8 channels in total). On</span>
<span class="sd">                real hardware, this is read from the device so does not need to be set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockSpectrumDevice</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_source_frame_rate_hz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_dict</span><span class="p">[</span><span class="n">SPC_MIINST_MODULES</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_modules</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_dict</span><span class="p">[</span><span class="n">SPC_MIINST_CHPERMODULE</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_channels_per_module</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_dict</span><span class="p">[</span><span class="n">SPC_PCITYP</span><span class="p">]</span> <span class="o">=</span> <span class="n">card_type</span><span class="o">.</span><span class="n">value</span>
        <span class="n">SpectrumCard</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_number</span><span class="o">=</span><span class="n">device_number</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;MockCard</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>

    <span class="k">def</span> <span class="nf">enable_timestamping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span><span class="p">:</span> <span class="n">MockTimestamper</span> <span class="o">=</span> <span class="n">MockTimestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock timestamper needs to be recreated if the acquisition mode is changed.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="o">=</span> <span class="n">MockTimestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock timestamper needs to be recreated if the sample rate is changed.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_sample_rate_in_hz</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="o">=</span> <span class="n">MockTimestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set length of mock recording (per channel). In FIFO mode, this will be quantised to the nearest 8 samples.</span>
<span class="sd">        See `SpectrumCard` for more information. This method is overridden here only so that the internal attributes</span>
<span class="sd">        related to the mock on-device buffer can be set.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): Number of samples in each generated mock waveform</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_device_buffer</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_acquisition_length_in_samples</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels_nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the channels to enable for the mock acquisition. See `SpectrumCard` for more information. This method is</span>
<span class="sd">        overridden here only so that the internal attributes related to the mock on-device buffer can be set.</span>

<span class="sd">        Args:</span>
<span class="sd">            channels_nums (List[int]): List of mock channel indices to enable, e.g. [0, 1, 2].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">),</span> <span class="n">channels_nums</span><span class="p">)))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_on_device_buffer</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">))</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_enabled_channels</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumSettingsMismatchError</span><span class="p">(</span><span class="s2">&quot;Not enough channels in mock device configuration.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">define_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardToPCDataTransferBuffer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or provide a `CardToPCDataTransferBuffer` object into which samples from the mock &#39;on device buffer&#39;</span>
<span class="sd">        will be transferred. If none is provided, a buffer will be instantiated using the currently set acquisition</span>
<span class="sd">        length and the number of enabled channels.</span>

<span class="sd">        Args:</span>
<span class="sd">            buffer (Optional[List[`CardToPCDataTransferBuffer`]]): A length-1 list containing a</span>
<span class="sd">            `CardToPCDataTransferBuffer` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">CardToPCDataTransferBuffer</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">start_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.start_transfer()`. This mock implementation simulates the continuous transfer of samples</span>
<span class="sd">        from the mock &#39;on device buffer&#39; to the transfer buffer by pointing the transfer buffer&#39;s data buffer attribute</span>
<span class="sd">        to the mock on-device buffer.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_device_buffer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Call define_transfer_buffer method.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.stop_transfer()`. This mock implementation simulates the end of the continuous transfer of</span>
<span class="sd">        samples from the mock &#39;on device buffer&#39; to the transfer buffer by assigning the transfer bugger to an array of</span>
<span class="sd">        zeros.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Call define_transfer_buffer method.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait_for_transfer_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.wait_for_transfer_to_complete()`. This mock implementation blocks until a new mock transfer</span>
<span class="sd">        has been completed (i.e. the contents of the transfer buffer has changed since __init__() or since the last call</span>
<span class="sd">        to `wait_for_transfer_to_complete()`).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;No transfer in progress.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">wait_for_acquisition_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.wait_for_acquisition_to_complete()`. This mock implementation blocks until a mock</span>
<span class="sd">        acquisition has been completed (i.e. the acquisition thread has shut down) or the request has timed out</span>
<span class="sd">        according to the `self.timeout_ms attribute`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">1e-3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout_in_ms</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;A timeout occurred while waiting for mock acquisition to complete.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No acquisition in progress. Wait for acquisition to complete has no effect&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>A mock spectrum card, for testing software written to use the <code><a href="#SpectrumCard">SpectrumCard</a></code> class.</p>

<p>This class overrides methods of <code><a href="#SpectrumCard">SpectrumCard</a></code> that communicate with hardware with mocked implementations, allowing
software to be tested without Spectrum hardware connected or drivers installed, e.g. during CI. It overrides
methods to use to set up a mock 'on device buffer' attribute into which a mock waveform source will write
samples. It also uses a MockTimestamper to generated timestamps for mock waveforms.</p>
</div>


                            <div id="MockSpectrumCard.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">MockSpectrumCard</span><span class="signature">(
    device_number: int,
    card_type: <a href="spectrumdevice/settings.html#card_dependent_properties.CardType">spectrumdevice.settings.card_dependent_properties.CardType</a>,
    mock_source_frame_rate_hz: float,
    num_modules: int = 2,
    num_channels_per_module: int = 4
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">card_type</span><span class="p">:</span> <span class="n">CardType</span><span class="p">,</span>
        <span class="n">mock_source_frame_rate_hz</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">num_modules</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">num_channels_per_module</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            device_number (int): The index of the mock device to create. Used to create a name for the device which is</span>
<span class="sd">                used internally.</span>
<span class="sd">            card_type (CardType): The model of card to mock. Affects the allowed acquisition and post-trigger lengths.</span>
<span class="sd">            mock_source_frame_rate_hz (float): Rate at which waveforms will be generated by the mock source providing</span>
<span class="sd">                data to the mock spectrum card.</span>
<span class="sd">            num_modules (int): The number of internal modules to assign the mock card. Default 2. On real hardware, this</span>
<span class="sd">                is read from the device so does not need to be set. See the Spectrum documentation to work out how many</span>
<span class="sd">                modules your hardware has.</span>
<span class="sd">            num_channels_per_module (int): The number of channels per module. Default 4 (so 8 channels in total). On</span>
<span class="sd">                real hardware, this is read from the device so does not need to be set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockSpectrumDevice</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mock_source_frame_rate_hz</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_dict</span><span class="p">[</span><span class="n">SPC_MIINST_MODULES</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_modules</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_dict</span><span class="p">[</span><span class="n">SPC_MIINST_CHPERMODULE</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_channels_per_module</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_dict</span><span class="p">[</span><span class="n">SPC_PCITYP</span><span class="p">]</span> <span class="o">=</span> <span class="n">card_type</span><span class="o">.</span><span class="n">value</span>
        <span class="n">SpectrumCard</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_number</span><span class="o">=</span><span class="n">device_number</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;MockCard</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>
</pre></div>

        </details>

            <div class="docstring"><h6 id="args">Args</h6>

<ul>
<li><strong>device_number (int):</strong>  The index of the mock device to create. Used to create a name for the device which is
used internally.</li>
<li><strong>card_type (CardType):</strong>  The model of card to mock. Affects the allowed acquisition and post-trigger lengths.</li>
<li><strong>mock_source_frame_rate_hz (float):</strong>  Rate at which waveforms will be generated by the mock source providing
data to the mock spectrum card.</li>
<li><strong>num_modules (int):</strong>  The number of internal modules to assign the mock card. Default 2. On real hardware, this
is read from the device so does not need to be set. See the Spectrum documentation to work out how many
modules your hardware has.</li>
<li><strong>num_channels_per_module (int):</strong>  The number of channels per module. Default 4 (so 8 channels in total). On
real hardware, this is read from the device so does not need to be set.</li>
</ul>
</div>


                            </div>
                            <div id="MockSpectrumCard.enable_timestamping" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.enable_timestamping">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">enable_timestamping</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">enable_timestamping</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span><span class="p">:</span> <span class="n">MockTimestamper</span> <span class="o">=</span> <span class="n">MockTimestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
</pre></div>

        </details>

    

                            </div>
                            <div id="MockSpectrumCard.set_acquisition_mode" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.set_acquisition_mode">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_acquisition_mode</span><span class="signature">(
    self,
    mode: <a href="spectrumdevice/settings.html#device_modes.AcquisitionMode">spectrumdevice.settings.device_modes.AcquisitionMode</a>
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_acquisition_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock timestamper needs to be recreated if the acquisition mode is changed.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_acquisition_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="o">=</span> <span class="n">MockTimestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Mock timestamper needs to be recreated if the acquisition mode is changed.</p>
</div>


                            </div>
                            <div id="MockSpectrumCard.set_sample_rate_in_hz" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.set_sample_rate_in_hz">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_sample_rate_in_hz</span><span class="signature">(self, rate: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_sample_rate_in_hz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rate</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mock timestamper needs to be recreated if the sample rate is changed.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_sample_rate_in_hz</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timestamper</span> <span class="o">=</span> <span class="n">MockTimestamper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Mock timestamper needs to be recreated if the sample rate is changed.</p>
</div>


                            </div>
                            <div id="MockSpectrumCard.set_acquisition_length_in_samples" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.set_acquisition_length_in_samples">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_acquisition_length_in_samples</span><span class="signature">(self, length_in_samples: int) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_acquisition_length_in_samples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length_in_samples</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set length of mock recording (per channel). In FIFO mode, this will be quantised to the nearest 8 samples.</span>
<span class="sd">        See `SpectrumCard` for more information. This method is overridden here only so that the internal attributes</span>
<span class="sd">        related to the mock on-device buffer can be set.</span>

<span class="sd">        Args:</span>
<span class="sd">            length_in_samples (int): Number of samples in each generated mock waveform</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_device_buffer</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="n">length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">))</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_acquisition_length_in_samples</span><span class="p">(</span><span class="n">length_in_samples</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set length of mock recording (per channel). In FIFO mode, this will be quantised to the nearest 8 samples.
See <code><a href="#SpectrumCard">SpectrumCard</a></code> for more information. This method is overridden here only so that the internal attributes
related to the mock on-device buffer can be set.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>length_in_samples (int):</strong>  Number of samples in each generated mock waveform</li>
</ul>
</div>


                            </div>
                            <div id="MockSpectrumCard.set_enabled_channels" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.set_enabled_channels">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">set_enabled_channels</span><span class="signature">(self, channels_nums: List[int]) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">set_enabled_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channels_nums</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the channels to enable for the mock acquisition. See `SpectrumCard` for more information. This method is</span>
<span class="sd">        overridden here only so that the internal attributes related to the mock on-device buffer can be set.</span>

<span class="sd">        Args:</span>
<span class="sd">            channels_nums (List[int]): List of mock channel indices to enable, e.g. [0, 1, 2].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">),</span> <span class="n">channels_nums</span><span class="p">)))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_on_device_buffer</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">))</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_enabled_channels</span><span class="p">(</span><span class="n">channels_nums</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumSettingsMismatchError</span><span class="p">(</span><span class="s2">&quot;Not enough channels in mock device configuration.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Set the channels to enable for the mock acquisition. See <code><a href="#SpectrumCard">SpectrumCard</a></code> for more information. This method is
overridden here only so that the internal attributes related to the mock on-device buffer can be set.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>channels_nums (List[int]):</strong>  List of mock channel indices to enable, e.g. [0, 1, 2].</li>
</ul>
</div>


                            </div>
                            <div id="MockSpectrumCard.define_transfer_buffer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.define_transfer_buffer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">define_transfer_buffer</span><span class="signature">(
    self,
    buffer: Optional[List[<a href="spectrumdevice/settings.html#transfer_buffer.CardToPCDataTransferBuffer">spectrumdevice.settings.transfer_buffer.CardToPCDataTransferBuffer</a>]] = None
) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">define_transfer_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">CardToPCDataTransferBuffer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create or provide a `CardToPCDataTransferBuffer` object into which samples from the mock &#39;on device buffer&#39;</span>
<span class="sd">        will be transferred. If none is provided, a buffer will be instantiated using the currently set acquisition</span>
<span class="sd">        length and the number of enabled channels.</span>

<span class="sd">        Args:</span>
<span class="sd">            buffer (Optional[List[`CardToPCDataTransferBuffer`]]): A length-1 list containing a</span>
<span class="sd">            `CardToPCDataTransferBuffer` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span> <span class="o">=</span> <span class="n">CardToPCDataTransferBuffer</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_length_in_samples</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">enabled_channels</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>Create or provide a <code>CardToPCDataTransferBuffer</code> object into which samples from the mock 'on device buffer'
will be transferred. If none is provided, a buffer will be instantiated using the currently set acquisition
length and the number of enabled channels.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>buffer (Optional[List[<code>CardToPCDataTransferBuffer</code>]]):</strong>  A length-1 list containing a</li>
<li><code>CardToPCDataTransferBuffer</code> object.</li>
</ul>
</div>


                            </div>
                            <div id="MockSpectrumCard.start_transfer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.start_transfer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">start_transfer</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">start_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.start_transfer()`. This mock implementation simulates the continuous transfer of samples</span>
<span class="sd">        from the mock &#39;on device buffer&#39; to the transfer buffer by pointing the transfer buffer&#39;s data buffer attribute</span>
<span class="sd">        to the mock on-device buffer.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_device_buffer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Call define_transfer_buffer method.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>See <code><a href="#SpectrumCard.start_transfer">SpectrumCard.start_transfer()</a></code>. This mock implementation simulates the continuous transfer of samples
from the mock 'on device buffer' to the transfer buffer by pointing the transfer buffer's data buffer attribute
to the mock on-device buffer.</p>
</div>


                            </div>
                            <div id="MockSpectrumCard.stop_transfer" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.stop_transfer">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_transfer</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stop_transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.stop_transfer()`. This mock implementation simulates the end of the continuous transfer of</span>
<span class="sd">        samples from the mock &#39;on device buffer&#39; to the transfer buffer by assigning the transfer bugger to an array of</span>
<span class="sd">        zeros.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;Call define_transfer_buffer method.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>See <code><a href="#SpectrumCard.stop_transfer">SpectrumCard.stop_transfer()</a></code>. This mock implementation simulates the end of the continuous transfer of
samples from the mock 'on device buffer' to the transfer buffer by assigning the transfer bugger to an array of
zeros.</p>
</div>


                            </div>
                            <div id="MockSpectrumCard.wait_for_transfer_to_complete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.wait_for_transfer_to_complete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">wait_for_transfer_to_complete</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">wait_for_transfer_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.wait_for_transfer_to_complete()`. This mock implementation blocks until a new mock transfer</span>
<span class="sd">        has been completed (i.e. the contents of the transfer buffer has changed since __init__() or since the last call</span>
<span class="sd">        to `wait_for_transfer_to_complete()`).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_buffer</span><span class="o">.</span><span class="n">data_array</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SpectrumNoTransferBufferDefined</span><span class="p">(</span><span class="s2">&quot;No transfer in progress.&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>See <code><a href="#SpectrumCard.wait_for_transfer_to_complete">SpectrumCard.wait_for_transfer_to_complete()</a></code>. This mock implementation blocks until a new mock transfer
has been completed (i.e. the contents of the transfer buffer has changed since __init__() or since the last call
to <code><a href="#MockSpectrumCard.wait_for_transfer_to_complete">wait_for_transfer_to_complete()</a></code>).</p>
</div>


                            </div>
                            <div id="MockSpectrumCard.wait_for_acquisition_to_complete" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumCard.wait_for_acquisition_to_complete">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">wait_for_acquisition_to_complete</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">wait_for_acquisition_to_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See `SpectrumCard.wait_for_acquisition_to_complete()`. This mock implementation blocks until a mock</span>
<span class="sd">        acquisition has been completed (i.e. the acquisition thread has shut down) or the request has timed out</span>
<span class="sd">        according to the `self.timeout_ms attribute`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mf">1e-3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeout_in_ms</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_thread</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;A timeout occurred while waiting for mock acquisition to complete.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No acquisition in progress. Wait for acquisition to complete has no effect&quot;</span><span class="p">)</span>
</pre></div>

        </details>

            <div class="docstring"><p>See <code><a href="#SpectrumCard.wait_for_acquisition_to_complete">SpectrumCard.wait_for_acquisition_to_complete()</a></code>. This mock implementation blocks until a mock
acquisition has been completed (i.e. the acquisition thread has shut down) or the request has timed out
according to the <code>self.timeout_ms attribute</code>.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#SpectrumCard">SpectrumCard</a></dt>
                                <dd id="MockSpectrumCard.reconnect" class="function"><a href="#SpectrumCard.reconnect">reconnect</a></dd>
                <dd id="MockSpectrumCard.status" class="variable"><a href="#SpectrumCard.status">status</a></dd>
                <dd id="MockSpectrumCard.transfer_buffers" class="variable"><a href="#SpectrumCard.transfer_buffers">transfer_buffers</a></dd>
                <dd id="MockSpectrumCard.get_waveforms" class="function"><a href="#SpectrumCard.get_waveforms">get_waveforms</a></dd>
                <dd id="MockSpectrumCard.get_timestamp" class="function"><a href="#SpectrumCard.get_timestamp">get_timestamp</a></dd>
                <dd id="MockSpectrumCard.disconnect" class="function"><a href="#SpectrumCard.disconnect">disconnect</a></dd>
                <dd id="MockSpectrumCard.connected" class="variable"><a href="#SpectrumCard.connected">connected</a></dd>
                <dd id="MockSpectrumCard.channels" class="variable"><a href="#SpectrumCard.channels">channels</a></dd>
                <dd id="MockSpectrumCard.enabled_channels" class="variable"><a href="#SpectrumCard.enabled_channels">enabled_channels</a></dd>
                <dd id="MockSpectrumCard.trigger_sources" class="variable"><a href="#SpectrumCard.trigger_sources">trigger_sources</a></dd>
                <dd id="MockSpectrumCard.set_trigger_sources" class="function"><a href="#SpectrumCard.set_trigger_sources">set_trigger_sources</a></dd>
                <dd id="MockSpectrumCard.external_trigger_mode" class="variable"><a href="#SpectrumCard.external_trigger_mode">external_trigger_mode</a></dd>
                <dd id="MockSpectrumCard.set_external_trigger_mode" class="function"><a href="#SpectrumCard.set_external_trigger_mode">set_external_trigger_mode</a></dd>
                <dd id="MockSpectrumCard.external_trigger_level_in_mv" class="variable"><a href="#SpectrumCard.external_trigger_level_in_mv">external_trigger_level_in_mv</a></dd>
                <dd id="MockSpectrumCard.set_external_trigger_level_in_mv" class="function"><a href="#SpectrumCard.set_external_trigger_level_in_mv">set_external_trigger_level_in_mv</a></dd>
                <dd id="MockSpectrumCard.external_trigger_pulse_width_in_samples" class="variable"><a href="#SpectrumCard.external_trigger_pulse_width_in_samples">external_trigger_pulse_width_in_samples</a></dd>
                <dd id="MockSpectrumCard.set_external_trigger_pulse_width_in_samples" class="function"><a href="#SpectrumCard.set_external_trigger_pulse_width_in_samples">set_external_trigger_pulse_width_in_samples</a></dd>
                <dd id="MockSpectrumCard.apply_channel_enabling" class="function"><a href="#SpectrumCard.apply_channel_enabling">apply_channel_enabling</a></dd>
                <dd id="MockSpectrumCard.acquisition_length_in_samples" class="variable"><a href="#SpectrumCard.acquisition_length_in_samples">acquisition_length_in_samples</a></dd>
                <dd id="MockSpectrumCard.post_trigger_length_in_samples" class="variable"><a href="#SpectrumCard.post_trigger_length_in_samples">post_trigger_length_in_samples</a></dd>
                <dd id="MockSpectrumCard.set_post_trigger_length_in_samples" class="function"><a href="#SpectrumCard.set_post_trigger_length_in_samples">set_post_trigger_length_in_samples</a></dd>
                <dd id="MockSpectrumCard.acquisition_mode" class="variable"><a href="#SpectrumCard.acquisition_mode">acquisition_mode</a></dd>
                <dd id="MockSpectrumCard.timeout_in_ms" class="variable"><a href="#SpectrumCard.timeout_in_ms">timeout_in_ms</a></dd>
                <dd id="MockSpectrumCard.set_timeout_in_ms" class="function"><a href="#SpectrumCard.set_timeout_in_ms">set_timeout_in_ms</a></dd>
                <dd id="MockSpectrumCard.clock_mode" class="variable"><a href="#SpectrumCard.clock_mode">clock_mode</a></dd>
                <dd id="MockSpectrumCard.set_clock_mode" class="function"><a href="#SpectrumCard.set_clock_mode">set_clock_mode</a></dd>
                <dd id="MockSpectrumCard.available_io_modes" class="variable"><a href="#SpectrumCard.available_io_modes">available_io_modes</a></dd>
                <dd id="MockSpectrumCard.feature_list" class="variable"><a href="#SpectrumCard.feature_list">feature_list</a></dd>
                <dd id="MockSpectrumCard.sample_rate_in_hz" class="variable"><a href="#SpectrumCard.sample_rate_in_hz">sample_rate_in_hz</a></dd>

            </div>
            <div><dt>spectrumdevice.devices.mocks.MockSpectrumDevice</dt>
                                <dd id="MockSpectrumCard.start_acquisition" class="function">start_acquisition</dd>
                <dd id="MockSpectrumCard.stop_acquisition" class="function">stop_acquisition</dd>
                <dd id="MockSpectrumCard.write_to_spectrum_device_register" class="function">write_to_spectrum_device_register</dd>
                <dd id="MockSpectrumCard.read_spectrum_device_register" class="function">read_spectrum_device_register</dd>

            </div>
            <div><dt><a href="#SpectrumDevice">SpectrumDevice</a></dt>
                                <dd id="MockSpectrumCard.reset" class="function"><a href="#SpectrumDevice.reset">reset</a></dd>
                <dd id="MockSpectrumCard.configure_acquisition" class="function"><a href="#SpectrumDevice.configure_acquisition">configure_acquisition</a></dd>
                <dd id="MockSpectrumCard.configure_trigger" class="function"><a href="#SpectrumDevice.configure_trigger">configure_trigger</a></dd>
                <dd id="MockSpectrumCard.execute_standard_single_acquisition" class="function"><a href="#SpectrumDevice.execute_standard_single_acquisition">execute_standard_single_acquisition</a></dd>
                <dd id="MockSpectrumCard.execute_finite_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_finite_multi_fifo_acquisition">execute_finite_multi_fifo_acquisition</a></dd>
                <dd id="MockSpectrumCard.execute_continuous_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_continuous_multi_fifo_acquisition">execute_continuous_multi_fifo_acquisition</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="MockSpectrumStarHub">
                                <div class="attr class">
        <a class="headerlink" href="#MockSpectrumStarHub">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">MockSpectrumStarHub</span><wbr>(<span class="base"><a href="#SpectrumStarHub">spectrumdevice.SpectrumStarHub</a></span>, <span class="base">spectrumdevice.devices.mocks.MockSpectrumDevice</span>):
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MockSpectrumStarHub</span><span class="p">(</span><span class="n">SpectrumStarHub</span><span class="p">,</span> <span class="n">MockSpectrumDevice</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mock spectrum StarHub, for testing software written to use the `SpectrumStarHub` class.</span>

<span class="sd">    Overrides methods of `SpectrumStarHub` and `SpectrumDevice` that communicate with hardware with mocked</span>
<span class="sd">    implementations allowing software to be tested without Spectrum hardware connected or drivers installed, e.g. during</span>
<span class="sd">    CI.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">child_cards</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">MockSpectrumCard</span><span class="p">],</span>
        <span class="n">master_card_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            child_cards (Sequence[`MockSpectrumCard`]): A list of `MockSpectrumCard` objects defining the properties of</span>
<span class="sd">            the child cards located within the mock hub.</span>
<span class="sd">            master_card_index (int): The position within child_cards where the master card (the card which controls the</span>
<span class="sd">                clock) is located.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockSpectrumDevice</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">SpectrumStarHub</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_number</span><span class="p">,</span> <span class="n">child_cards</span><span class="p">,</span> <span class="n">master_card_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;MockHub</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>

    <span class="k">def</span> <span class="nf">start_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start a mock acquisition</span>

<span class="sd">        See `SpectrumStarHub.start_acquisition()`. With a hardware device, StarHub&#39;s only need to be sent a single</span>
<span class="sd">        instruction to start acquisition, which they automatically relay to their child cards - hence why</span>
<span class="sd">        `start_acquisition` is implemented in SpectrumDevice (base class to both `SpectrumCard` and `SpectrumStarHub`)</span>
<span class="sd">        rather than in `SpectrumStarHub`. In this mock `implementation`, each card&#39;s acquisition is started</span>
<span class="sd">        individually.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">stop_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop a mock acquisition</span>

<span class="sd">        See `SpectrumDevice.stop_acquisition`. With a hardware device, StarHub&#39;s only need to be sent a single</span>
<span class="sd">        instruction to stop acquisition, which they automatically relay to their child cards - hence why</span>
<span class="sd">        `stop_acquisition()` is implemented in SpectrumDevice (base class to both `SpectrumCard` and `SpectrumStarHub`)</span>
<span class="sd">        rather than in `SpectrumStarHub`. In this mock implementation, each card&#39;s acquisition is stopped individually.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">stop_acquisition</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>A mock spectrum StarHub, for testing software written to use the <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code> class.</p>

<p>Overrides methods of <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code> and <code><a href="#SpectrumDevice">SpectrumDevice</a></code> that communicate with hardware with mocked
implementations allowing software to be tested without Spectrum hardware connected or drivers installed, e.g. during
CI.</p>
</div>


                            <div id="MockSpectrumStarHub.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumStarHub.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">MockSpectrumStarHub</span><span class="signature">(
    device_number: int,
    child_cards: Sequence[<a href="#devices.mocks.MockSpectrumCard">spectrumdevice.devices.mocks.MockSpectrumCard</a>],
    master_card_index: int
)</span>
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">device_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">child_cards</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">MockSpectrumCard</span><span class="p">],</span>
        <span class="n">master_card_index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            child_cards (Sequence[`MockSpectrumCard`]): A list of `MockSpectrumCard` objects defining the properties of</span>
<span class="sd">            the child cards located within the mock hub.</span>
<span class="sd">            master_card_index (int): The position within child_cards where the master card (the card which controls the</span>
<span class="sd">                clock) is located.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MockSpectrumDevice</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">SpectrumStarHub</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_number</span><span class="p">,</span> <span class="n">child_cards</span><span class="p">,</span> <span class="n">master_card_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;MockHub</span><span class="si">{</span><span class="n">device_number</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_visa_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acquisition_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acquisition_mode</span>
</pre></div>

        </details>

            <div class="docstring"><h6 id="args">Args</h6>

<ul>
<li><strong>child_cards (Sequence[<code><a href="#MockSpectrumCard">MockSpectrumCard</a></code>]):</strong>  A list of <code><a href="#MockSpectrumCard">MockSpectrumCard</a></code> objects defining the properties of</li>
<li>the child cards located within the mock hub.</li>
<li><strong>master_card_index (int):</strong>  The position within child_cards where the master card (the card which controls the
clock) is located.</li>
</ul>
</div>


                            </div>
                            <div id="MockSpectrumStarHub.start_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumStarHub.start_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">start_acquisition</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">start_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start a mock acquisition</span>

<span class="sd">        See `SpectrumStarHub.start_acquisition()`. With a hardware device, StarHub&#39;s only need to be sent a single</span>
<span class="sd">        instruction to start acquisition, which they automatically relay to their child cards - hence why</span>
<span class="sd">        `start_acquisition` is implemented in SpectrumDevice (base class to both `SpectrumCard` and `SpectrumStarHub`)</span>
<span class="sd">        rather than in `SpectrumStarHub`. In this mock `implementation`, each card&#39;s acquisition is started</span>
<span class="sd">        individually.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">start_acquisition</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Start a mock acquisition</p>

<p>See <code><a href="#SpectrumStarHub.start_acquisition">SpectrumStarHub.start_acquisition()</a></code>. With a hardware device, StarHub's only need to be sent a single
instruction to start acquisition, which they automatically relay to their child cards - hence why
<code><a href="#MockSpectrumStarHub.start_acquisition">start_acquisition</a></code> is implemented in SpectrumDevice (base class to both <code><a href="#SpectrumCard">SpectrumCard</a></code> and <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code>)
rather than in <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code>. In this mock <code>implementation</code>, each card's acquisition is started
individually.</p>
</div>


                            </div>
                            <div id="MockSpectrumStarHub.stop_acquisition" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#MockSpectrumStarHub.stop_acquisition">#&nbsp;&nbsp</a>

        
            <span class="def">def</span>
            <span class="name">stop_acquisition</span><span class="signature">(self) -&gt; None</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span>    <span class="k">def</span> <span class="nf">stop_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stop a mock acquisition</span>

<span class="sd">        See `SpectrumDevice.stop_acquisition`. With a hardware device, StarHub&#39;s only need to be sent a single</span>
<span class="sd">        instruction to stop acquisition, which they automatically relay to their child cards - hence why</span>
<span class="sd">        `stop_acquisition()` is implemented in SpectrumDevice (base class to both `SpectrumCard` and `SpectrumStarHub`)</span>
<span class="sd">        rather than in `SpectrumStarHub`. In this mock implementation, each card&#39;s acquisition is stopped individually.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_child_cards</span><span class="p">:</span>
            <span class="n">card</span><span class="o">.</span><span class="n">stop_acquisition</span><span class="p">()</span>
</pre></div>

        </details>

            <div class="docstring"><p>Stop a mock acquisition</p>

<p>See <code><a href="#SpectrumDevice.stop_acquisition">SpectrumDevice.stop_acquisition</a></code>. With a hardware device, StarHub's only need to be sent a single
instruction to stop acquisition, which they automatically relay to their child cards - hence why
<code><a href="#MockSpectrumStarHub.stop_acquisition">stop_acquisition()</a></code> is implemented in SpectrumDevice (base class to both <code><a href="#SpectrumCard">SpectrumCard</a></code> and <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code>)
rather than in <code><a href="#SpectrumStarHub">SpectrumStarHub</a></code>. In this mock implementation, each card's acquisition is stopped individually.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#SpectrumStarHub">SpectrumStarHub</a></dt>
                                <dd id="MockSpectrumStarHub.disconnect" class="function"><a href="#SpectrumStarHub.disconnect">disconnect</a></dd>
                <dd id="MockSpectrumStarHub.reconnect" class="function"><a href="#SpectrumStarHub.reconnect">reconnect</a></dd>
                <dd id="MockSpectrumStarHub.status" class="variable"><a href="#SpectrumStarHub.status">status</a></dd>
                <dd id="MockSpectrumStarHub.start_transfer" class="function"><a href="#SpectrumStarHub.start_transfer">start_transfer</a></dd>
                <dd id="MockSpectrumStarHub.stop_transfer" class="function"><a href="#SpectrumStarHub.stop_transfer">stop_transfer</a></dd>
                <dd id="MockSpectrumStarHub.wait_for_transfer_to_complete" class="function"><a href="#SpectrumStarHub.wait_for_transfer_to_complete">wait_for_transfer_to_complete</a></dd>
                <dd id="MockSpectrumStarHub.connected" class="variable"><a href="#SpectrumStarHub.connected">connected</a></dd>
                <dd id="MockSpectrumStarHub.set_triggering_card" class="function"><a href="#SpectrumStarHub.set_triggering_card">set_triggering_card</a></dd>
                <dd id="MockSpectrumStarHub.clock_mode" class="variable"><a href="#SpectrumStarHub.clock_mode">clock_mode</a></dd>
                <dd id="MockSpectrumStarHub.set_clock_mode" class="function"><a href="#SpectrumStarHub.set_clock_mode">set_clock_mode</a></dd>
                <dd id="MockSpectrumStarHub.sample_rate_in_hz" class="variable"><a href="#SpectrumStarHub.sample_rate_in_hz">sample_rate_in_hz</a></dd>
                <dd id="MockSpectrumStarHub.set_sample_rate_in_hz" class="function"><a href="#SpectrumStarHub.set_sample_rate_in_hz">set_sample_rate_in_hz</a></dd>
                <dd id="MockSpectrumStarHub.trigger_sources" class="variable"><a href="#SpectrumStarHub.trigger_sources">trigger_sources</a></dd>
                <dd id="MockSpectrumStarHub.set_trigger_sources" class="function"><a href="#SpectrumStarHub.set_trigger_sources">set_trigger_sources</a></dd>
                <dd id="MockSpectrumStarHub.external_trigger_mode" class="variable"><a href="#SpectrumStarHub.external_trigger_mode">external_trigger_mode</a></dd>
                <dd id="MockSpectrumStarHub.set_external_trigger_mode" class="function"><a href="#SpectrumStarHub.set_external_trigger_mode">set_external_trigger_mode</a></dd>
                <dd id="MockSpectrumStarHub.external_trigger_level_in_mv" class="variable"><a href="#SpectrumStarHub.external_trigger_level_in_mv">external_trigger_level_in_mv</a></dd>
                <dd id="MockSpectrumStarHub.set_external_trigger_level_in_mv" class="function"><a href="#SpectrumStarHub.set_external_trigger_level_in_mv">set_external_trigger_level_in_mv</a></dd>
                <dd id="MockSpectrumStarHub.external_trigger_pulse_width_in_samples" class="variable"><a href="#SpectrumStarHub.external_trigger_pulse_width_in_samples">external_trigger_pulse_width_in_samples</a></dd>
                <dd id="MockSpectrumStarHub.set_external_trigger_pulse_width_in_samples" class="function"><a href="#SpectrumStarHub.set_external_trigger_pulse_width_in_samples">set_external_trigger_pulse_width_in_samples</a></dd>
                <dd id="MockSpectrumStarHub.apply_channel_enabling" class="function"><a href="#SpectrumStarHub.apply_channel_enabling">apply_channel_enabling</a></dd>
                <dd id="MockSpectrumStarHub.enabled_channels" class="variable"><a href="#SpectrumStarHub.enabled_channels">enabled_channels</a></dd>
                <dd id="MockSpectrumStarHub.set_enabled_channels" class="function"><a href="#SpectrumStarHub.set_enabled_channels">set_enabled_channels</a></dd>
                <dd id="MockSpectrumStarHub.transfer_buffers" class="variable"><a href="#SpectrumStarHub.transfer_buffers">transfer_buffers</a></dd>
                <dd id="MockSpectrumStarHub.define_transfer_buffer" class="function"><a href="#SpectrumStarHub.define_transfer_buffer">define_transfer_buffer</a></dd>
                <dd id="MockSpectrumStarHub.wait_for_acquisition_to_complete" class="function"><a href="#SpectrumStarHub.wait_for_acquisition_to_complete">wait_for_acquisition_to_complete</a></dd>
                <dd id="MockSpectrumStarHub.get_waveforms" class="function"><a href="#SpectrumStarHub.get_waveforms">get_waveforms</a></dd>
                <dd id="MockSpectrumStarHub.get_timestamp" class="function"><a href="#SpectrumStarHub.get_timestamp">get_timestamp</a></dd>
                <dd id="MockSpectrumStarHub.enable_timestamping" class="function"><a href="#SpectrumStarHub.enable_timestamping">enable_timestamping</a></dd>
                <dd id="MockSpectrumStarHub.channels" class="variable"><a href="#SpectrumStarHub.channels">channels</a></dd>
                <dd id="MockSpectrumStarHub.acquisition_length_in_samples" class="variable"><a href="#SpectrumStarHub.acquisition_length_in_samples">acquisition_length_in_samples</a></dd>
                <dd id="MockSpectrumStarHub.set_acquisition_length_in_samples" class="function"><a href="#SpectrumStarHub.set_acquisition_length_in_samples">set_acquisition_length_in_samples</a></dd>
                <dd id="MockSpectrumStarHub.post_trigger_length_in_samples" class="variable"><a href="#SpectrumStarHub.post_trigger_length_in_samples">post_trigger_length_in_samples</a></dd>
                <dd id="MockSpectrumStarHub.set_post_trigger_length_in_samples" class="function"><a href="#SpectrumStarHub.set_post_trigger_length_in_samples">set_post_trigger_length_in_samples</a></dd>
                <dd id="MockSpectrumStarHub.acquisition_mode" class="variable"><a href="#SpectrumStarHub.acquisition_mode">acquisition_mode</a></dd>
                <dd id="MockSpectrumStarHub.set_acquisition_mode" class="function"><a href="#SpectrumStarHub.set_acquisition_mode">set_acquisition_mode</a></dd>
                <dd id="MockSpectrumStarHub.timeout_in_ms" class="variable"><a href="#SpectrumStarHub.timeout_in_ms">timeout_in_ms</a></dd>
                <dd id="MockSpectrumStarHub.set_timeout_in_ms" class="function"><a href="#SpectrumStarHub.set_timeout_in_ms">set_timeout_in_ms</a></dd>
                <dd id="MockSpectrumStarHub.feature_list" class="variable"><a href="#SpectrumStarHub.feature_list">feature_list</a></dd>
                <dd id="MockSpectrumStarHub.available_io_modes" class="variable"><a href="#SpectrumStarHub.available_io_modes">available_io_modes</a></dd>

            </div>
            <div><dt>spectrumdevice.devices.mocks.MockSpectrumDevice</dt>
                                <dd id="MockSpectrumStarHub.write_to_spectrum_device_register" class="function">write_to_spectrum_device_register</dd>
                <dd id="MockSpectrumStarHub.read_spectrum_device_register" class="function">read_spectrum_device_register</dd>

            </div>
            <div><dt><a href="#SpectrumDevice">SpectrumDevice</a></dt>
                                <dd id="MockSpectrumStarHub.reset" class="function"><a href="#SpectrumDevice.reset">reset</a></dd>
                <dd id="MockSpectrumStarHub.configure_acquisition" class="function"><a href="#SpectrumDevice.configure_acquisition">configure_acquisition</a></dd>
                <dd id="MockSpectrumStarHub.configure_trigger" class="function"><a href="#SpectrumDevice.configure_trigger">configure_trigger</a></dd>
                <dd id="MockSpectrumStarHub.execute_standard_single_acquisition" class="function"><a href="#SpectrumDevice.execute_standard_single_acquisition">execute_standard_single_acquisition</a></dd>
                <dd id="MockSpectrumStarHub.execute_finite_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_finite_multi_fifo_acquisition">execute_finite_multi_fifo_acquisition</a></dd>
                <dd id="MockSpectrumStarHub.execute_continuous_multi_fifo_acquisition" class="function"><a href="#SpectrumDevice.execute_continuous_multi_fifo_acquisition">execute_continuous_multi_fifo_acquisition</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="settings">
                                <div class="attr module"><a class="headerlink" href="#settings">#&nbsp;&nbsp</a>
<span class="name"><a href="spectrumdevice/settings.html">spectrumdevice.settings</a></span></div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;Provides Enums and Dataclasses wrapping the register values provided by the Spectrum API, to be used for configuring</span>
<span class="sd">hardware and interpreting responses received from hardware.&quot;&quot;&quot;</span>

<span class="c1"># Christian Baker, King&#39;s College London</span>
<span class="c1"># Copyright (c) 2021 School of Biomedical Engineering &amp; Imaging Sciences, King&#39;s College London</span>
<span class="c1"># Licensed under the MIT. You may obtain a copy at https://opensource.org/licenses/MIT.</span>

<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">spectrumdevice.settings.card_dependent_properties</span> <span class="kn">import</span> <span class="n">CardType</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.settings.card_features</span> <span class="kn">import</span> <span class="n">CardFeature</span><span class="p">,</span> <span class="n">AdvancedCardFeature</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.settings.device_modes</span> <span class="kn">import</span> <span class="n">AcquisitionMode</span><span class="p">,</span> <span class="n">ClockMode</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.settings.io_lines</span> <span class="kn">import</span> <span class="n">IOLineMode</span><span class="p">,</span> <span class="n">AvailableIOModes</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.settings.transfer_buffer</span> <span class="kn">import</span> <span class="n">TransferBuffer</span><span class="p">,</span> <span class="n">CardToPCDataTransferBuffer</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.settings.triggering</span> <span class="kn">import</span> <span class="n">TriggerSource</span><span class="p">,</span> <span class="n">ExternalTriggerMode</span>
<span class="kn">from</span> <span class="nn">spectrumdevice.settings.status</span> <span class="kn">import</span> <span class="n">CARD_STATUS_TYPE</span><span class="p">,</span> <span class="n">STAR_HUB_STATUS_TYPE</span><span class="p">,</span> <span class="n">StatusCode</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;AcquisitionSettings&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TriggerSettings&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AcquisitionMode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ClockMode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CardFeature&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AdvancedCardFeature&quot;</span><span class="p">,</span>
    <span class="s2">&quot;IOLineMode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AvailableIOModes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TransferBuffer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CardToPCDataTransferBuffer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TriggerSource&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ExternalTriggerMode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CARD_STATUS_TYPE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;STAR_HUB_STATUS_TYPE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;StatusCode&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SpectrumRegisterLength&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CardType&quot;</span><span class="p">,</span>
<span class="p">]</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">TriggerSettings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A dataclass collecting all settings related to triggering. See Spectrum documentation.&quot;&quot;&quot;</span>

    <span class="n">trigger_sources</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TriggerSource</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The trigger sources to enable&quot;&quot;&quot;</span>
    <span class="n">external_trigger_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ExternalTriggerMode</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The external trigger mode (if an external trigger is enabled).&quot;&quot;&quot;</span>
    <span class="n">external_trigger_level_in_mv</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The level an external signal must reach to cause a trigger event (if an external trigger is enabled).&quot;&quot;&quot;</span>
    <span class="n">external_trigger_pulse_width_in_samples</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The required width of an external trigger pulse (if an external trigger is enabled).&quot;&quot;&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">AcquisitionSettings</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A dataclass collecting all settings required to configure an acquisition. See Spectrum documentation.&quot;&quot;&quot;</span>

    <span class="n">acquisition_mode</span><span class="p">:</span> <span class="n">AcquisitionMode</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Standard Single mode or Multi FIF mode.&quot;&quot;&quot;</span>
    <span class="n">sample_rate_in_hz</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Acquisition rate in samples per second.&quot;&quot;&quot;</span>
    <span class="n">acquisition_length_in_samples</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The length of the recording in samples per channel.&quot;&quot;&quot;</span>
    <span class="n">pre_trigger_length_in_samples</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The number of samples of the recording that will have been acquired before the trigger event.&quot;&quot;&quot;</span>
    <span class="n">timeout_in_ms</span><span class="p">:</span> <span class="nb">int</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;How long to wait for a trigger event before timing out.&quot;&quot;&quot;</span>
    <span class="n">enabled_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The channel indices to enable for the acquisition.&quot;&quot;&quot;</span>
    <span class="n">vertical_ranges_in_mv</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The voltage range to apply to each enabled channel in mW.&quot;&quot;&quot;</span>
    <span class="n">vertical_offsets_in_percent</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The DC offset to apply to each enabled channel as percentages of their vertical ranges.&quot;&quot;&quot;</span>
    <span class="n">timestamping_enabled</span><span class="p">:</span> <span class="nb">bool</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If True, Measurements will include the time at which the acquisition was triggered. Increases latency by ~10 ms.</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">SpectrumRegisterLength</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enum defining the possible lengths of a spectrum register.&quot;&quot;&quot;</span>

    <span class="n">THIRTY_TWO</span> <span class="o">=</span> <span class="mi">0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;32 bit register&quot;&quot;&quot;</span>
    <span class="n">SIXTY_FOUR</span> <span class="o">=</span> <span class="mi">1</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;64 bit register&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>

        </details>

            <div class="docstring"><p>Provides Enums and Dataclasses wrapping the register values provided by the Spectrum API, to be used for configuring
hardware and interpreting responses received from hardware.</p>
</div>


                </section>
                <section id="Measurement">
                                <div class="attr class">
        <a class="headerlink" href="#Measurement">#&nbsp;&nbsp</a>

                <div class="decorator">@dataclass</div>

        <span class="def">class</span>
        <span class="name">Measurement</span>:
    </div>

                <details>
            <summary>View Source</summary>
            <div class="codehilite"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Measurement</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Measurement is a dataclass for storing a set of waveforms generated by a single acquisition, with a timestamp.&quot;&quot;&quot;</span>

    <span class="n">waveforms</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">float_</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Contains the acquired waveforms as a list of 1D NumPy arrays&quot;&quot;&quot;</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The time at which the acquisition was triggered, as a datetime.datetime object&quot;&quot;&quot;</span>
</pre></div>

        </details>

            <div class="docstring"><p>Measurement is a dataclass for storing a set of waveforms generated by a single acquisition, with a timestamp.</p>
</div>


                            <div id="Measurement.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Measurement.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Measurement</span><span class="signature">(
    waveforms: List[numpy.ndarray[Any, numpy.dtype[numpy.float64]]],
    timestamp: Optional[datetime.datetime]
)</span>
    </div>

        
    

                            </div>
                            <div id="Measurement.waveforms" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Measurement.waveforms">#&nbsp;&nbsp</a>

        <span class="name">waveforms</span><span class="annotation">: List[numpy.ndarray[Any, numpy.dtype[numpy.float64]]]</span>
    </div>

            <div class="docstring"><p>Contains the acquired waveforms as a list of 1D NumPy arrays</p>
</div>


                            </div>
                            <div id="Measurement.timestamp" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Measurement.timestamp">#&nbsp;&nbsp</a>

        <span class="name">timestamp</span><span class="annotation">: Optional[datetime.datetime]</span>
    </div>

            <div class="docstring"><p>The time at which the acquisition was triggered, as a datetime.datetime object</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">(${doc.parameters.join(", ")})</span>`;
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>